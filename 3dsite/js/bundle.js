var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mainViewSelectItem_1=require("./scene/item/item/mainViewSelectItem"),carView_1=require("./scene/tabBox/item/car/carView"),chooseItem_1=require("./scene/tabBox/item/displayItem/chooseItem"),controlItem_1=require("./scene/controlItem"),mainScene_1=require("./scene/mainScene"),topBoxItem_1=require("./scene/item/topBoxItem"),rightTabBox_1=require("./scene/tabBox/rightTabBox"),autoScene_1=require("./script/autoScene"),GameConfig=function(){function GameConfig(){}return GameConfig.init=function(){var reg=Laya.ClassUtils.regClass;reg("scene/item/item/mainViewSelectItem.ts",mainViewSelectItem_1.default),reg("scene/tabBox/item/car/carView.ts",carView_1.default),reg("scene/tabBox/item/displayItem/chooseItem.ts",chooseItem_1.default),reg("scene/controlItem.ts",controlItem_1.default),reg("scene/mainScene.ts",mainScene_1.default),reg("scene/item/topBoxItem.ts",topBoxItem_1.default),reg("scene/tabBox/rightTabBox.ts",rightTabBox_1.default),reg("script/autoScene.ts",autoScene_1.default)},GameConfig.width=1920,GameConfig.height=1080,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="test/mainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!0,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig}();exports.default=GameConfig,GameConfig.init()},{"./scene/controlItem":9,"./scene/item/item/mainViewSelectItem":13,"./scene/item/topBoxItem":15,"./scene/mainScene":16,"./scene/tabBox/item/car/carView":17,"./scene/tabBox/item/displayItem/chooseItem":20,"./scene/tabBox/rightTabBox":23,"./script/autoScene":30}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GameConfig_1=require("./GameConfig"),dataMgr_1=require("./mgr/dataMgr"),pathFinding_1=require("./mgr/pathFinding");new(function(){function Main(){Laya3D.init(GameConfig_1.default.width,GameConfig_1.default.height),Laya.stage.scaleMode=GameConfig_1.default.scaleMode,Laya.stage.screenMode=GameConfig_1.default.screenMode,Laya.MouseManager.multiTouchEnabled=!0,Laya.URL.exportSceneToJson=GameConfig_1.default.exportSceneToJson,(GameConfig_1.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig_1.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Laya.alertGlobalError=!1,Laya.stage.frameRate="slow",Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return Main.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},Main.prototype.onConfigLoaded=function(){this.init(),Laya.loader.load(["res/atlas/common.atlas","res/atlas/comp.atlas","res/atlas/win.atlas"],Laya.Handler.create(this,function(){GameConfig_1.default.startScene&&Laya.Scene.open(GameConfig_1.default.startScene)}))},Main.prototype.init=function(){dataMgr_1.default.getInstance(),pathFinding_1.default.getInstance()},Main}())},{"./GameConfig":1,"./mgr/dataMgr":4,"./mgr/pathFinding":6}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("./gameMgr"),aniMgr=function(){function aniMgr(){this.dataObj={"搅拌车车轮动画":"wheelAni","搅拌车车罐动画":"boxAni","粉罐车车轮动画":"fenWheelAni","油罐车车轮动画":"youWheelAni","卡车车轮动画":"kaWheelAni","无人值守前面打开":"无人值守磅秤前面打开","无人值守后面打开":"无人值守磅秤后面打开","无人值守前面关闭":"无人值守磅秤前面关闭","无人值守后面关闭":"无人值守磅秤后面关闭","无人值守默认状态":"无人值守磅秤默认状态"},this.animatorObj={wheelAni:"车辆/搅拌车",boxAni:"车辆/搅拌车",fenWheelAni:"车辆/粉罐车",youWheelAni:"车辆/油罐车",kaWheelAni:"车辆/卡车","无人值守磅秤前面打开":"厂房/无人值守磅秤","无人值守磅秤后面打开":"厂房/无人值守磅秤","无人值守磅秤前面关闭":"厂房/无人值守磅秤","无人值守磅秤后面关闭":"厂房/无人值守磅秤","无人值守磅秤默认状态":"厂房/无人值守磅秤"}}return aniMgr.getInstance=function(){return this._instance||(this._instance=new aniMgr,this._instance.initAni()),this._instance},aniMgr.prototype.initAni=function(){for(var key in this.animatorObj){for(var strs=this.animatorObj[key].split("/"),node=gameMgr_1.default.getInstance().Sscene,i=0;i<strs.length;i++)node&&(node=node.getChildByName(strs[i]));node&&(this.animatorObj[key]=node.getComponent(Laya.Animator))}},aniMgr.prototype.playAni=function(){},aniMgr}();exports.default=aniMgr},{"./gameMgr":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dataMgr=function(){function dataMgr(){}return dataMgr.getInstance=function(){return this._instance||(this._instance=new dataMgr,this._instance.init()),this._instance},dataMgr.prototype.init=function(){Laya.loader.load("res/data.json",Laya.Handler.create(this,this.loadJson),null,Laya.Loader.JSON)},dataMgr.prototype.loadJson=function(jsonObj){this._data=jsonObj},dataMgr.prototype.getBySheetName=function(str,id){return void 0===id&&(id=null),null!=id?this._data[str][id]:this._data[str]},dataMgr.prototype.getCarDataByName=function(sign){for(var data=dataMgr.getInstance().getBySheetName("car"),i=0;i<data.length;i++)if(data[i].name==sign)return data[i];return null},dataMgr}();exports.default=dataMgr},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var carMgr_1=require("../script/car/carMgr"),aniMgr_1=require("./aniMgr"),webSocket_1=require("../util/webSocket"),gameMgr=function(){function gameMgr(){}return gameMgr.getInstance=function(){return this._instance||(this._instance=new gameMgr),this._instance},Object.defineProperty(gameMgr.prototype,"mainScene",{get:function(){return this._mainScene},set:function(sc){this._mainScene=sc},enumerable:!0,configurable:!0}),Object.defineProperty(gameMgr.prototype,"Sscene",{get:function(){return this._Sscene},set:function(sc){sc&&(this._Sscene=sc,aniMgr_1.default.getInstance(),carMgr_1.default.getInstance(),webSocket_1.default.getInstance())},enumerable:!0,configurable:!0}),Object.defineProperty(gameMgr.prototype,"camera",{get:function(){return this._camera},set:function(sc){this._camera=sc},enumerable:!0,configurable:!0}),gameMgr.prototype.setNowDir=function(dir){this._nowDir=dir},gameMgr.prototype.getNowDir=function(){return this._nowDir?this._nowDir:null},gameMgr.UP="up",gameMgr.DOWN="down",gameMgr.LEFT="left",gameMgr.RIGHT="right",gameMgr}();exports.default=gameMgr},{"../script/car/carMgr":38,"../util/webSocket":47,"./aniMgr":3}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var pathFinding=function(){function pathFinding(){}return pathFinding.getInstance=function(){return this._instance||(this._instance=new pathFinding,this._instance.init()),this._instance},pathFinding.prototype.init=function(){this._pf=window.PF,Laya.loader.load(["res/martix.json","res/roadMartix.json"],Laya.Handler.create(this,function(){this._grid=new this._pf.Grid(Laya.loader.getRes("res/martix.json")),this._roadGrid=new this._pf.Grid(Laya.loader.getRes("res/roadMartix.json")),this._finder=new this._pf.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0})}),null,Laya.Loader.JSON)},pathFinding.prototype.findPath=function(x,y,tox,toy){x*=2,y*=2,tox=Math.floor(2*tox),toy=Math.floor(2*toy);var path=this._finder.findPath(Math.floor(x),Math.floor(y),tox,toy,this._grid.clone());path&&path.length&&(path=this._pf.Util.smoothenPath(this._grid.clone(),path));for(var i=0;i<path.length;i++)path[i][0]=path[i][0]/2,path[i][1]=path[i][1]/2;return path},pathFinding.prototype.ranDomPath=function(x,y){var tox=Math.floor(234*Math.random()),toy=Math.floor(234*Math.random());return this._grid.nodes[toy][tox].walkable?this.findPath(x,y,tox/2,toy/2):this.ranDomPath(x,y)},pathFinding.prototype.getIsRight=function(x,y){return x=2*Math.floor(x),y=2*Math.floor(y),this._roadGrid.nodes[y][x].walkable},pathFinding.leftOutPoint={x:14,y:26.5,passX:14,passY:26.5},pathFinding.rightInPoint={x:103,y:90.5,passX:103,passY:90.5},pathFinding.bangPoint={x:74.5,y:80,passX:74.5,passY:67.5},pathFinding.xiePoint={x:47.5,y:43.5,passX:46,passY:43.5},pathFinding.parkingPos=[{x:39.5,y:41},{x:39.5,y:43.5},{x:39.5,y:45.5},{x:39.5,y:47.5},{x:39.5,y:49.5},{x:198,y:39},{x:198,y:41},{x:198,y:43},{x:198,y:45},{x:198,y:47},{x:198,y:49},{x:198,y:51},{x:207,y:29},{x:207,y:31},{x:207,y:33},{x:207,y:35},{x:207,y:37},{x:207,y:39},{x:207,y:41},{x:207,y:43},{x:207,y:45},{x:207,y:47},{x:207,y:49},{x:207,y:51}],pathFinding}();exports.default=pathFinding},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var soundMgr=function(){function soundMgr(){}return soundMgr.getInstance=function(){return this._instance||(this._instance=new soundMgr),this._instance},soundMgr.prototype.playSound=function(sound,playTimes){void 0===playTimes&&(playTimes=1),Laya.SoundManager.playSound("res/music/"+sound+".mp3",playTimes)},soundMgr.prototype.stopSound=function(sound){Laya.SoundManager.stopSound("res/music/"+sound+".mp3")},soundMgr.CAR_MOVEING="carMoving",soundMgr.FACTORY_WORK="facWork",soundMgr.FACTORY_PIDA="facPidai",soundMgr.WARNING_MP3="warning",soundMgr}();exports.default=soundMgr},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var transportOrder=function(){return function(){}}();exports.default=transportOrder},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../ui/layaMaxUI"),gameMgr_1=require("../mgr/gameMgr"),controlItem=function(_super){function controlItem(){var _this=_super.call(this)||this;return _this.curTouchId=0,_this.isDown=!1,_this.angle=-1,_this.radians=-1,_this.isleftControl=!0,_this}return __extends(controlItem,_super),controlItem.prototype.onAwake=function(){Laya.Browser.onMobile&&(Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.originPiont=new Laya.Point(this.width/2,this.height/2),this.visible=!1)},controlItem.prototype.onMouseDown=function(e){if(this.isleftControl){if(e.stageX>Laya.stage.width/2||this.isDown)return}else if(e.stageX<Laya.stage.width/2||this.isDown)return;e.stopPropagation(),this.curTouchId=e.touchId,this.isDown=!0,this.pos(Laya.stage.mouseX-this.width/2,Laya.stage.mouseY-this.height/2),this.img_control.pos(this.width/2,this.height/2),this.visible=!0,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMove)},controlItem.prototype.onMouseUp=function(e){e.touchId==this.curTouchId&&(e.stopPropagation(),this.isDown=!1,this.visible=!1,Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMove),this.radians=this.angle=-1,gameMgr_1.default.getInstance().setNowDir(null))},controlItem.prototype.onEnable=function(){},controlItem.prototype.onDisable=function(){},controlItem.prototype.onMove=function(e){if(e.touchId==this.curTouchId){e.stopPropagation();var locationPos=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),!1);this.img_control.pos(locationPos.x,locationPos.y),this.deltaX=locationPos.x-this.originPiont.x,this.deltaY=locationPos.y-this.originPiont.y;var dx=this.deltaX*this.deltaX,dy=this.deltaY*this.deltaY;if(this.angle=180*Math.atan2(this.deltaX,this.deltaY)/Math.PI,this.angle<0&&(this.angle+=360),this.angle=Math.round(this.angle),this.radians=Math.PI/180*this.angle,dx+dy>=22500){var x=Math.floor(150*Math.sin(this.radians)+this.originPiont.x),y=Math.floor(150*Math.cos(this.radians)+this.originPiont.y);this.img_control.pos(x,y)}else this.img_control.pos(locationPos.x,locationPos.y);this.checkDirection()}},controlItem.prototype.checkDirection=function(){Math.abs(this.mouseX-this.width/2)>Math.abs(this.mouseY-this.height/2)?this.mouseX>this.width/2?gameMgr_1.default.getInstance().setNowDir(gameMgr_1.default.RIGHT):gameMgr_1.default.getInstance().setNowDir(gameMgr_1.default.LEFT):this.mouseY>this.height/2?gameMgr_1.default.getInstance().setNowDir(gameMgr_1.default.DOWN):gameMgr_1.default.getInstance().setNowDir(gameMgr_1.default.UP)},controlItem}(layaMaxUI_1.ui.test.controlItemUI);exports.default=controlItem},{"../mgr/gameMgr":5,"../ui/layaMaxUI":44}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),Eventer_1=require("../../util/Eventer"),carNumTips=function(_super){function carNumTips(c){var _this=_super.call(this)||this;return _this._car=c,_this}return __extends(carNumTips,_super),carNumTips.prototype.onEnable=function(){this.img.on(Laya.Event.MOUSE_MOVE,this,function(){Laya.Tween.to(this,{width:150},200)}),this.img.on(Laya.Event.MOUSE_OUT,this,function(){Laya.Tween.to(this,{width:40},200)}),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.visible=!1}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.visible=!0})},carNumTips.prototype.onAwake=function(){this.la_num.text=this._car.carNumber},carNumTips.prototype.moveFun=function(){this.la_num.text="jin"},carNumTips.prototype.moveOut=function(){this.la_num.text="chu"},carNumTips.prototype.updataData=function(c){this._car=c,this.la_num.text=this._car.carNumber},carNumTips.prototype.onDisable=function(){},carNumTips}(layaMaxUI_1.ui.item.carNumTipsUI);exports.default=carNumTips},{"../../ui/layaMaxUI":44,"../../util/Eventer":45}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),Eventer_1=require("../../util/Eventer"),displayItem=function(_super){function displayItem(){var _this=_super.call(this)||this;return _this._strAry=["闲置卸货口"],_this._nowIndex=0,Laya.timer.once(2e3,_this,function(){this.playAni(),Eventer_1.default.getInstance().on(Eventer_1.default.XIEHUO_START,this,this.changeAry),Eventer_1.default.getInstance().on(Eventer_1.default.XIEHUO_END,this,function(){this._strAry=["闲置卸货口"],this._nowIndex=0})}),_this}return __extends(displayItem,_super),displayItem.prototype.changeAry=function(carData){this._strAry=[carData.desc[0],"正在装货："+carData.desc[1],carData.desc[2]],this._nowIndex=0},displayItem.prototype.playAni=function(){this.ani1.play(0,!1),this.la_right.text=this._strAry[this._nowIndex],this._nowIndex=this._nowIndex>=this._strAry.length-1?0:this._nowIndex+1,this.la_next.text=this._strAry[this._nowIndex],Laya.timer.once(3e3,this,this.playAni)},displayItem.prototype.changeStr=function(data){this._strAry=["正在排队:"],this._nowIndex=0;for(var str="",i=0;i<data.length;i++)str+="NO."+data[i].ID+"   "+data[i].CarNo+"\n";this._strAry.push(str)},displayItem}(layaMaxUI_1.ui.item.displayItemUI);exports.default=displayItem},{"../../ui/layaMaxUI":44,"../../util/Eventer":45}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var funSelectItem=function(_super){function funSelectItem(){var _this=_super.call(this)||this;return _this._data=[],_this}return __extends(funSelectItem,_super),funSelectItem.prototype.onEnable=function(){this.list.renderHandler=Laya.Handler.create(this,this.renderHandler,null,!1),this.setData(),this.addEvent()},funSelectItem.prototype.addEvent=function(){Laya.stage.on(Laya.Event.CLICK,this,this.clickHandler),this.list.on(Laya.Event.CLICK,this,this.clickHandler)},funSelectItem.prototype.offEvent=function(){Laya.stage.off(Laya.Event.CLICK,this,this.clickHandler)},funSelectItem.prototype.clickHandler=function(e){e.currentTarget!=this.list?(this.offEvent(),this.removeSelf()):e.stopPropagation()},funSelectItem.prototype.renderHandler=function(item,index){item.show()},funSelectItem.prototype.setData=function(){this.list.array=this._data},funSelectItem.getTips=function(data){return this._tips||(this._tips=new funSelectItem),this._tips._data=data,this._tips},funSelectItem}(require("../../ui/layaMaxUI").ui.item.funSelectItemUI);exports.default=funSelectItem},{"../../ui/layaMaxUI":44}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../ui/layaMaxUI"),Eventer_1=require("../../../util/Eventer"),mainViewSelectItem=function(_super){function mainViewSelectItem(){var _this=_super.call(this)||this;return _this.addEvent(),_this}return __extends(mainViewSelectItem,_super),mainViewSelectItem.prototype.addEvent=function(){this.on(Laya.Event.CLICK,this,this.clickHandler),Eventer_1.default.getInstance().on(Eventer_1.default.SELECT_ITME_UPDATA,this,function(){this.bu_choose.selected=!1})},mainViewSelectItem.prototype.clickHandler=function(){Eventer_1.default.getInstance().updateModel(Eventer_1.default.SELECT_ITME_UPDATA),this.bu_choose.selected=!0},mainViewSelectItem.prototype.show=function(){this.bu_choose.selected=!1,this.bu_choose.label=this.dataSource},mainViewSelectItem}(layaMaxUI_1.ui.item.item.mainViewSelectItemUI);exports.default=mainViewSelectItem},{"../../../ui/layaMaxUI":44,"../../../util/Eventer":45}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),Eventer_1=require("../../util/Eventer"),liaoCangTips=function(_super){function liaoCangTips(str){var _this=_super.call(this)||this;return _this._text=str,_this}return __extends(liaoCangTips,_super),liaoCangTips.prototype.onAwake=function(){this.img.on(Laya.Event.MOUSE_MOVE,this,function(){this.zOrder=1,Laya.Tween.to(this,{width:150},500)}),this.img.on(Laya.Event.MOUSE_OUT,this,function(){this.zOrder=0,Laya.Tween.to(this,{width:38},500)}),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.visible=!1}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.visible=!0}),this.la_num.text=this._text},liaoCangTips.prototype.onDisable=function(){},liaoCangTips}(layaMaxUI_1.ui.item.liaoCangTipsUI);exports.default=liaoCangTips},{"../../ui/layaMaxUI":44,"../../util/Eventer":45}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),funSelectItem_1=require("./funSelectItem"),dataMgr_1=require("../../mgr/dataMgr"),tipsWin_1=require("../win/tipsWin"),topBoxItem=function(_super){function topBoxItem(){return _super.call(this)||this}return __extends(topBoxItem,_super),topBoxItem.prototype.onEnable=function(){this.bu_fun1.on(Laya.Event.CLICK,this,this.buttonFun),this.bu_fun2.on(Laya.Event.CLICK,this,this.buttonFun),this.bu_fun3.on(Laya.Event.CLICK,this,this.buttonFun),this.bu_video.on(Laya.Event.CLICK,this,this.videoTips),this.on(Laya.Event.MOUSE_MOVE,this,function(){this.mouse_box.top<=-70&&Laya.Tween.to(this.mouse_box,{top:0},500,null)}),this.on(Laya.Event.MOUSE_OUT,this,function(){this._tips&&this._tips.displayedInStage||Laya.Tween.to(this.mouse_box,{top:-70},500,null)})},topBoxItem.prototype.videoTips=function(){tipsWin_1.default.openVideo()},topBoxItem.prototype.buttonFun=function(e){switch(this.retSetBu(),e.currentTarget){case this.bu_fun1:this.bu_fun1.alpha=1,this.bu_fun1.fontSize=20,this._tips=funSelectItem_1.default.getTips(dataMgr_1.default.getInstance().getBySheetName("funButton")[0].selectItems),this._tips.pos(107,66);break;case this.bu_fun2:this.bu_fun2.alpha=1,this.bu_fun2.fontSize=20,this._tips=funSelectItem_1.default.getTips(dataMgr_1.default.getInstance().getBySheetName("funButton")[1].selectItems),this._tips.pos(263,66);break;case this.bu_fun3:this.bu_fun3.alpha=1,this.bu_fun3.fontSize=20,this._tips=funSelectItem_1.default.getTips(dataMgr_1.default.getInstance().getBySheetName("funButton")[2].selectItems),this._tips.pos(421,66)}e.stopPropagation(),this.addChild(this._tips)},topBoxItem.prototype.retSetBu=function(){this.bu_fun1.alpha=this.bu_fun2.alpha=this.bu_fun3.alpha=.8,this.bu_fun1.fontSize=this.bu_fun2.fontSize=this.bu_fun3.fontSize=16},topBoxItem}(layaMaxUI_1.ui.item.topBoxItemUI);exports.default=topBoxItem},{"../../mgr/dataMgr":4,"../../ui/layaMaxUI":44,"../win/tipsWin":27,"./funSelectItem":12}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("./../ui/layaMaxUI"),CameraMoveScript_1=require("../script/CameraMoveScript"),gameMgr_1=require("../mgr/gameMgr"),signSc_1=require("../script/signSc"),warningWin_1=require("../scene/win/warningWin"),lightSc_1=require("../script/lightSc"),Eventer_1=require("../util/Eventer"),car_1=require("../script/car/common/car"),building_1=require("../script/building/building"),tankFactory_1=require("../script/building/tankBuild/tankFactory"),controlRoom_1=require("../script/building/controlBuild/controlRoom"),noManScale_1=require("../script/building/noManScale/noManScale"),finishedFactory_1=require("../script/building/finishedBuild/finishedFactory"),powerFactory_1=require("../script/building/powerBuild/powerFactory"),tank_1=require("../script/building/tankBuild/tank"),mainScene=function(_super){function mainScene(){var _this=_super.call(this)||this;return _this._isSecond=!1,_this._outHitResult=new Laya.HitResult,_this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),_this.into(),_this}return __extends(mainScene,_super),mainScene.prototype.into=function(){gameMgr_1.default.getInstance().mainScene=this,Laya.loader.create(["res/3d/skybox/SkyBox.lmat","res/3d/Conventional/MixStation.ls"],Laya.Handler.create(this,this.waitToDo),Laya.Handler.create(this,function(index){this._indexTimerObj=index,this._indexTimerObj>=1&&(this._isSecond=!0),this._indexTimerObj=this._isSecond?this._indexTimerObj:.5*this._indexTimerObj,this.la_progress.text="加载进度："+Math.ceil(100*this._indexTimerObj)+"%",this._indexTween&&(this._indexTween.pause(),this._indexTween=null),this._indexTween=Laya.Tween.to(this.img_index,{width:this.img_indexBg.width*this._indexTimerObj},200)})),this._indexTimerFun=function(){this._indexTimerObj<.98&&(this._indexTimerObj+=.01,this.la_progress.text="加载进度："+Math.ceil(100*this._indexTimerObj)+"%",this._indexTween&&(this._indexTween.pause(),this._indexTween=null),this._indexTween=Laya.Tween.to(this.img_index,{width:this.img_indexBg.width*this._indexTimerObj},200))},Laya.timer.loop(1e3,this,this._indexTimerFun)},mainScene.prototype.waitToDo=function(){Laya.timer.clear(this,this._indexTimerFun),this._Sscene=Laya.loader.getRes("res/3d/Conventional/MixStation.ls"),this._Sscene.cacheAs="bitmap",this._Sscene.enableFog=!1,this.la_progress.visible=!1,this.ani1.play(0,!1),this.ani1.on(Laya.Event.COMPLETE,this,function(){this.dWorld.addChild(this._Sscene),this.spr_tips.visible=!0,this.viewBox.visible=!0,this.addScript()})},mainScene.prototype.addScript=function(){gameMgr_1.default.getInstance().buildingSc=this._Sscene.getChildByName("building").addComponent(building_1.default),this._camera=this._Sscene.getChildByName("Main Camera"),gameMgr_1.default.getInstance().camera=this._camera.addComponent(CameraMoveScript_1.default);var exposureNumber=0,mat=Laya.loader.getRes("res/3d/skybox/SkyBox.lmat"),skyRenderer=this._Sscene.skyRenderer;skyRenderer.mesh=Laya.SkyBox.instance,skyRenderer.material=mat,Laya.timer.frameLoop(1,this,function(){this._Sscene.skyRenderer.material.exposure=.2*Math.sin(exposureNumber+=.01)+1,this._Sscene.skyRenderer.material.rotation+=.01});var directionLight=new Laya.DirectionLight;directionLight.color=new Laya.Vector3(.8,.8,.8),directionLight.intensity=1,directionLight.shadow=!0,this._bi=this._Sscene.getChildByName("signal"),this._bi.addComponent(signSc_1.default),this._Sscene.getChildByName("alarm").addComponent(lightSc_1.default),gameMgr_1.default.getInstance().Sscene=this._Sscene,this.addEvent()},mainScene.prototype.addEvent=function(){this.dWorld.on(Laya.Event.CLICK,this,this.clickHandler),this.dWorld.on(Laya.Event.DOUBLE_CLICK,this,this.clickHandler,[!0]),this.bu_add.on(Laya.Event.CLICK,this,function(){gameMgr_1.default.getInstance().buildingSc.openInSide()}),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.bu_add.visible=!0}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.bu_add.visible=!1})},mainScene.prototype.clickHandler=function(e,isDouble){void 0===isDouble&&(isDouble=!1);var point=new Laya.Vector2(0,0);if(point.x=Laya.MouseManager.instance.mouseX,point.y=Laya.MouseManager.instance.mouseY,this._camera.viewportPointToRay(point,this._ray),gameMgr_1.default.getInstance().Sscene.physicsSimulation.rayCast(this._ray,this._outHitResult),this._outHitResult&&this._outHitResult.succeeded){var spr=this._outHitResult.collider.owner;this.la_name.text=""+this._outHitResult.collider.owner.name,this.showTitle();var str=this._outHitResult.collider.owner.name;switch(console.log("点击的物体名称：  "+str),str){case"anchor":this._outHitResult.collider.owner.parent.getComponent(car_1.default).openCarWin();break;case"finishBuild":this._outHitResult.collider.owner.getComponent(finishedFactory_1.default).openWin();break;case"powerBuild":this._outHitResult.collider.owner.getComponent(powerFactory_1.default).openWin();break;case"noManScale":this._outHitResult.collider.owner.getComponent(noManScale_1.default).openWin();break;case"controlBulid":this._outHitResult.collider.owner.getComponent(controlRoom_1.default).openWin();break;case"tankBuild":this._outHitResult.collider.owner.getComponent(tankFactory_1.default).openWin();break;case"road":isDouble&&(this._bi.transform.position=new Laya.Vector3(this._outHitResult.point.x,this._bi.transform.position.y,this._outHitResult.point.z),gameMgr_1.default.getInstance().camera.setLookAtPosition(this._bi,!1),gameMgr_1.default.getInstance().camera.gotoPoint());break;case"signal":gameMgr_1.default.getInstance().camera.setLookAtPosition(spr,!1),gameMgr_1.default.getInstance().camera.gotoPoint();break;case"alarm":warningWin_1.default.openWin();break;default:str.indexOf("StockBin")>=0&&this._outHitResult.collider.owner.getComponent(tank_1.default).clickAndOpenWin()}}},mainScene.prototype.showTitle=function(){this._titleTween&&(this._titleTween.pause(),this._titleTween=null);var fun=function(){this._titleTween=Laya.Tween.to(this.spr_tips,{y:974},2.8*(this.spr_tips.y-974))};Laya.timer.clear(this,fun),this._titleTween=Laya.Tween.to(this.spr_tips,{y:1080},2.8*(1080-this.spr_tips.y),null,Laya.Handler.create(this,function(){Laya.timer.once(3e3,this,fun)}))},mainScene}(layaMaxUI_1.ui.test.mainSceneUI);exports.default=mainScene},{"../mgr/gameMgr":5,"../scene/win/warningWin":28,"../script/CameraMoveScript":29,"../script/building/building":31,"../script/building/controlBuild/controlRoom":32,"../script/building/finishedBuild/finishedFactory":33,"../script/building/noManScale/noManScale":34,"../script/building/powerBuild/powerFactory":35,"../script/building/tankBuild/tank":36,"../script/building/tankBuild/tankFactory":37,"../script/car/common/car":39,"../script/lightSc":42,"../script/signSc":43,"../util/Eventer":45,"./../ui/layaMaxUI":44}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../../ui/layaMaxUI"),timeUtil_1=require("../../../../util/timeUtil"),carView=function(_super){function carView(){return _super.call(this)||this}return __extends(carView,_super),carView.prototype.show=function(ind){ind++,this.dataSource&&(this._car=this.dataSource,this.la_ind.text=ind+"",this.la_driver.text=this._car.driver.name,this.la_good.text=this._car.material.name,this.on(Laya.Event.CLICK,this,this._car.openCarWin.bind(this._car)),this.updateTime())},carView.prototype.updateTime=function(){var ti=(new Date).getTime()-this._car.noWorkTime;this.la_time.text=timeUtil_1.default.getTimeByMs(ti,timeUtil_1.timeFormat.mmss),this.timer.once(1e3,this,this.updateTime)},carView}(layaMaxUI_1.ui.tabBox.item.car.carViewUI);exports.default=carView},{"../../../../ui/layaMaxUI":44,"../../../../util/timeUtil":46}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../../ui/layaMaxUI"),carMgr_1=require("../../../../script/car/carMgr"),car_1=require("../../../../script/car/common/car"),carViewItem=function(_super){function carViewItem(type){var _this=_super.call(this)||this;return _this._type=type,_this.list.renderHandler=Laya.Handler.create(_this,_this.createHandler,null,!1),_this.init(),_this.addEvent(),_this}return __extends(carViewItem,_super),carViewItem.prototype.createHandler=function(item,index){item.show(index)},carViewItem.prototype.addEvent=function(){this.bu_in.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_out.on(Laya.Event.CLICK,this,this.clickHandler)},carViewItem.prototype.clickHandler=function(e){switch(this.img_in.visible=!1,this.img_out.visible=!1,e.currentTarget){case this.bu_in:this.img_in.visible=!0,this.list.array=this._inFacCars;break;case this.bu_out:this.img_out.visible=!0,this.list.array=this._outFacCars}},carViewItem.prototype.init=function(){switch(this._type){case"搅拌车":var arys=carMgr_1.default.getInstance().getCarByType(car_1.carType.JiaoBan);this.la_carType.text="搅拌车";break;case"卡车":arys=carMgr_1.default.getInstance().getCarByType(car_1.carType.KaChe);this.la_carType.text="卡车";break;case"粉罐车":arys=carMgr_1.default.getInstance().getCarByType(car_1.carType.FenGuan);this.la_carType.text="粉罐车";break;case"油罐车":arys=carMgr_1.default.getInstance().getCarByType(car_1.carType.YouGuan);this.la_carType.text="油罐车";break;default:this.la_carType.text=""}if(this._inFacCars=[],this._outFacCars=[],arys&&arys.length>0)for(var i=0;i<arys.length;i++)arys[i].carState?this._inFacCars.push(arys[i]):this._outFacCars.push(arys[i]);this._inFacCars&&(this.img_in.visible=!0,this.list.array=this._inFacCars)},carViewItem}(layaMaxUI_1.ui.tabBox.item.car.carViewItemUI);exports.default=carViewItem},{"../../../../script/car/carMgr":38,"../../../../script/car/common/car":39,"../../../../ui/layaMaxUI":44}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../ui/layaMaxUI"),carViewItem_1=require("./car/carViewItem"),detailBoxItem=function(_super){function detailBoxItem(str){var _this=_super.call(this)||this;return _this.la_name.text=str,_this._type=str,_this.init(),_this}return __extends(detailBoxItem,_super),detailBoxItem.prototype.init=function(){this._type;var item=new carViewItem_1.default(this._type);this.itemBox.addChild(item)},detailBoxItem.prototype.onEnable=function(){this.contentBox.left=300,Laya.Tween.to(this.contentBox,{left:0},500)},detailBoxItem.prototype.removeSelf=function(){return this.contentBox.left>=300?_super.prototype.removeSelf.call(this):Laya.Tween.to(this.contentBox,{left:300},500,null,Laya.Handler.create(this,function(){this.removeSelf()})),this},detailBoxItem}(layaMaxUI_1.ui.tabBox.item.detailBoxItemUI);exports.default=detailBoxItem},{"../../../ui/layaMaxUI":44,"./car/carViewItem":18}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var chooseItem=function(_super){function chooseItem(){return _super.call(this)||this}return __extends(chooseItem,_super),chooseItem.prototype.show=function(ds){this._type=this.dataSource,this.la_name.text=this._type,this._diplayShow=ds,this.addEvent()},chooseItem.prototype.addEvent=function(){this.on(Laya.Event.CLICK,this,this.clickHandler)},chooseItem.prototype.clickHandler=function(){this.la_choose.visible=!this.la_choose.visible,this._diplayShow.setItemShowList(this._type,this.la_choose.visible)},chooseItem}(require("../../../../ui/layaMaxUI").ui.tabBox.item.display.chooseItemUI);exports.default=chooseItem},{"../../../../ui/layaMaxUI":44}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../../ui/layaMaxUI"),dataMgr_1=require("../../../../mgr/dataMgr"),chooseItem_1=require("./chooseItem"),carViewItem_1=require("../car/carViewItem"),diplayShow=function(_super){function diplayShow(){var _this=_super.call(this)||this;return _this._itemShowList={},_this._indHeight=0,_this.addEvent(),_this.list.renderHandler=Laya.Handler.create(_this,_this.createHandler,null,!1),_this.height=800,_this}return __extends(diplayShow,_super),diplayShow.prototype.createHandler=function(item,index){item.show(this)},diplayShow.prototype.addEvent=function(){this.init(),this.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_choose.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_close.on(Laya.Event.CLICK,this,this.clickHandler)},diplayShow.prototype.onEnable=function(){this.contentBox.left=300,Laya.Tween.to(this.contentBox,{left:0},500)},diplayShow.prototype.removeSelf=function(){return this.contentBox.left>=300?(this.parent.playOpenAni(),_super.prototype.removeSelf.call(this)):Laya.Tween.to(this.contentBox,{left:300},500,null,Laya.Handler.create(this,function(){this.removeSelf()})),this},diplayShow.prototype.clickHandler=function(e){switch(e.stopPropagation(),e.target instanceof chooseItem_1.default||e.target instanceof Laya.List||e.target==this.bu_choose||(this.chooseWin.visible=!1),e.currentTarget){case this.bu_choose:this.chooseWin.visible=!this.chooseWin.visible;break;case this.bu_close:this.removeSelf()}},diplayShow.prototype.setItemShowList=function(type,visible){for(var key in visible?this._itemShowList[type]||(this._itemShowList[type]=this.createItem(type)):this._itemShowList[type]=null,this.itemBox.removeChildren(),this._itemShowList)this._itemShowList[key]&&this.itemBox.addChild(this._itemShowList[key]);this.rankPanel()},diplayShow.prototype.init=function(){this._chooseItem=dataMgr_1.default.getInstance().getBySheetName("setting",0).value,this.list.array=this._chooseItem},diplayShow.prototype.createItem=function(type){return new carViewItem_1.default(type)},diplayShow.prototype.rankPanel=function(){this._indHeight=0;for(var items=this.itemBox._children,he=Math.floor(755/items.length),i=0;i<items.length;i++)items[i].height=he,items[i].pos(0,this._indHeight),this._indHeight+=he},diplayShow}(layaMaxUI_1.ui.tabBox.item.display.diplayShowUI);exports.default=diplayShow},{"../../../../mgr/dataMgr":4,"../../../../ui/layaMaxUI":44,"../car/carViewItem":18,"./chooseItem":20}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../../ui/layaMaxUI"),diplayShow_1=require("./displayItem/diplayShow"),detailBoxItem_1=require("./detailBoxItem"),rightTabBoxItem=function(_super){function rightTabBoxItem(str){var _this=_super.call(this)||this;return _this._str=str,_this.init(),_this}return __extends(rightTabBoxItem,_super),rightTabBoxItem.prototype.init=function(){this.la_title.text=this._str,this.height=this.la_title.height+20,this.addEvent()},rightTabBoxItem.prototype.addEvent=function(){this.img_bg.on(Laya.Event.CLICK,this,this.clickHandler)},rightTabBoxItem.prototype.clickHandler=function(e){switch(e.currentTarget){case this.img_bg:this._detailBox||(this._detailBox="显示面板"==this._str?new diplayShow_1.default:new detailBoxItem_1.default(this._str)),this._detailBox.displayedInStage?(this._detailBox instanceof diplayShow_1.default&&this.playOpenAni(),this._detailBox.removeSelf(),this.img_bg.skin="tabBox/img_unchoose.png"):(this._detailBox instanceof diplayShow_1.default&&this.playCloseAni(),this.addChild(this._detailBox),this.img_bg.skin="tabBox/img_choose.png",this.parent.parent.setItemUnchoose(this))}},rightTabBoxItem.prototype.playOpenAni=function(){this.parent.parent.playOpenAni()},rightTabBoxItem.prototype.playCloseAni=function(){this.parent.parent.playCloseAni()},rightTabBoxItem.prototype.changeBg=function(isOn){this.img_bg.skin=isOn?"tabBox/img_choose.png":"tabBox/img_unchoose.png",this._detailBox instanceof detailBoxItem_1.default&&(isOn?this.addChild(this._detailBox):this._detailBox.removeSelf())},rightTabBoxItem}(layaMaxUI_1.ui.tabBox.item.rightTabBoxItemUI);exports.default=rightTabBoxItem},{"../../../ui/layaMaxUI":44,"./detailBoxItem":19,"./displayItem/diplayShow":21}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),rightTabBoxItem_1=require("./item/rightTabBoxItem"),dataMgr_1=require("../../mgr/dataMgr"),rightTabBox=function(_super){function rightTabBox(){var _this=_super.call(this)||this;return _this.init(),_this}return __extends(rightTabBox,_super),rightTabBox.prototype.init=function(){var func=dataMgr_1.default.getInstance().getBySheetName("setting",0).value;this._funcButtons=[];var indHeight=0;(item=new rightTabBoxItem_1.default("显示面板")).pos(0,0),indHeight+=item.height,this._funcButtons.push(item),this.tabBox.addChild(item);for(var i=0;i<func.length;i++){var item=new rightTabBoxItem_1.default(func[i]);this._funcButtons.push(item),item.pos(0,indHeight),indHeight+=item.height,this.tabBox.addChild(item)}},rightTabBox.prototype.setItemUnchoose=function(chooseItem){for(var i=0;i<this._funcButtons.length;i++)this._funcButtons[i]!=chooseItem&&this._funcButtons[i].changeBg(!1)},rightTabBox.prototype.playOpenAni=function(){this.tabBox.left=30,Laya.Tween.to(this.tabBox,{left:0},500)},rightTabBox.prototype.playCloseAni=function(){Laya.Tween.to(this.tabBox,{left:30},500)},rightTabBox}(layaMaxUI_1.ui.tabBox.rightTabBoxUI);exports.default=rightTabBox},{"../../mgr/dataMgr":4,"../../ui/layaMaxUI":44,"./item/rightTabBoxItem":22}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),gameMgr_1=require("../../mgr/gameMgr"),Eventer_1=require("../../util/Eventer"),controlRoom_1=require("../../script/building/controlBuild/controlRoom"),buildingWin=function(_super){function buildingWin(){var _this=_super.call(this)||this;return _this.obj={info:["站点名称：百子湾搅拌站","工程名称：危改项目","搅拌机组编号：1","生产产品编号：1"],setting:[],diaodu:["机组任务：50%","调度人员:吴彦祖"],state:["运行状态：满载","机组个数：2"]},_this}return __extends(buildingWin,_super),buildingWin.prototype.onEnable=function(){this.list.renderHandler=Laya.Handler.create(this,this.renderHandler,null,!1),this.bu_tab.selectHandler=Laya.Handler.create(this,this.selectHandler,null,!1),this.bu_tab.selectedIndex=0,this.selectHandler(0),this.bu_close.on(Laya.Event.CLICK,this,this.close),this.bu_info.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_setting.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_diaodu.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_state.on(Laya.Event.CLICK,this,this.clickHandler),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.visible=!1}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.visible=!0}),this.img_icon.skin="winAssets/icon/img_icon_"+this._buildSpr3d.name+".png",this.bu_info.alpha=1,this.bu_info.fontSize=25,this.la_name.text=this._buildSpr3d.name,this.bu_inside.on(Laya.Event.CLICK,this,function(){"controlBulid"==this._buildSpr3d.name?gameMgr_1.default.getInstance().buildingSc.controlRoomSc.openInside(!gameMgr_1.default.getInstance().buildingSc.controlRoomSc.isOpenInside):gameMgr_1.default.getInstance().buildingSc.openInSide()}),this.ani_build.interval=120,this.ani_build.loadAtlas("res/atlas/ani/"+this._buildSpr3d.name+".atlas",null,this._buildSpr3d.name).play(0,!0,this._buildSpr3d.name),this.changeInfo(),this.list.array=this.obj.info},buildingWin.prototype.getCNname=function(str){switch(str){case"powerBuild":return"粉料厂";case"controlBuild":return"控制室";case"rawMaterial":return"粉料罐";case"tankBuild":return"粉料仓";case"noManScale":return"无人值守磅秤"}},buildingWin.prototype.changeInfo=function(){switch(this._buildSpr3d.name){case"controlBulid":var buildsc=this._buildSpr3d.getComponent(controlRoom_1.default);buildsc.transOrders&&buildsc.transOrders[0]&&(this.obj={info:["工程名称："+buildsc.transOrders[0].projectName,"序号："+buildsc.transOrders[0].orderId,"浇筑部位："+buildsc.transOrders[0].PouringSite,"产品标号："+buildsc.transOrders[0].productSign,"发货方量："+buildsc.transOrders[0].sendNum,"发货时间："+buildsc.transOrders[0].sendTime,"生产任务编号："+buildsc.transOrders[0].taskId],setting:[],diaodu:["机组任务：50%","调度人员:吴彦祖"],state:["运行状态：满载","机组个数：2"]})}},buildingWin.prototype.selectHandler=function(ind){switch(ind){case 0:this.tab0.visible=!0,this.tab1.visible=!1;break;case 1:this.tab1.visible=!0,this.tab0.visible=!1}},buildingWin.prototype.renderHandler=function(item,index){item.dataSource?(item.visible=!0,item.text=item.dataSource):item.visible=!1},buildingWin.prototype.clickHandler=function(e){switch(e.stopPropagation(),e.currentTarget){case this.bu_info:this.list.array=this.obj.info;break;case this.bu_setting:this.list.array=this.obj.setting;break;case this.bu_diaodu:this.list.array=this.obj.diaodu;break;case this.bu_state:this.list.array=this.obj.state}this.reSetButton(),e.currentTarget.alpha=1,e.currentTarget.fontSize=25},buildingWin.prototype.reSetButton=function(){this.bu_info.alpha=this.bu_state.alpha=this.bu_setting.alpha=this.bu_diaodu.alpha=.8,this.bu_info.fontSize=this.bu_state.fontSize=this.bu_setting.fontSize=this.bu_diaodu.fontSize=20},buildingWin.openDIY=function(spr){this._win||(this._win=new buildingWin),this._win._buildSpr3d=spr,this._win.open(!1)},buildingWin}(layaMaxUI_1.ui.win.buildingWinUI);exports.default=buildingWin},{"../../mgr/gameMgr":5,"../../script/building/controlBuild/controlRoom":32,"../../ui/layaMaxUI":44,"../../util/Eventer":45}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),dataMgr_1=require("../../mgr/dataMgr"),tipsWin_1=require("./tipsWin"),pathFinding_1=require("../../mgr/pathFinding"),Eventer_1=require("../../util/Eventer"),carMgr_1=require("../../script/car/carMgr"),detailWin=function(_super){function detailWin(){var _this=_super.call(this)||this;return _this._funcDataObj={},_this}return __extends(detailWin,_super),detailWin.prototype.onEnable=function(){this.addEvent(),this.showDetail(),this.bu_tab.selectHandler=Laya.Handler.create(this,this.selectHandler,null,!1),this.bu_tab.selectedIndex=0,this.selectHandler(0),this.img_icon.skin="winAssets/icon/img_icon_"+this._car.car3dSpr.name+".png"},detailWin.prototype.selectHandler=function(ind){switch(ind){case 0:this.tab0.visible=!0,this.tab1.visible=!1;break;case 1:this.tab1.visible=!0,this.tab0.visible=!1}},detailWin.prototype.addEvent=function(){this.bu0_0.on(Laya.Event.CLICK,this,this.clickHandler),this.bu0_1.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_1_0.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_1_1.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_2_0.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_2_1.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_close.on(Laya.Event.CLICK,this,this.close),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.visible=!1}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.visible=!0})},detailWin.prototype.showDetail=function(){this.la_metrialType.text=this._car.material.name,this.la_carNum.text=this._car.carNumber,this.la_name.text=this._car.carTypeCN;for(var descs=this._car.desc,i=0;i<3;i++)this["la_desc"+i].text=descs[i];var funcs=this._car.funcButtonID;for(i=0;i<funcs.length;i++){var funData=dataMgr_1.default.getInstance().getBySheetName("item",funcs[i]);funData&&(this._funcDataObj[i]=funData)}this.ani_car.interval=80,this.ani_car.loadAtlas("res/atlas/ani/"+this._car.carAniName+".atlas",null,this._car.carAniName).play(0,!0,this._car.carAniName)},detailWin.prototype.closeWin=function(){this.close()},detailWin.prototype.clickHandler=function(e){var data;switch(e.currentTarget){case this.bu0_0:case this.bu_1_1:data=this._funcDataObj[0];break;case this.bu0_1:case this.bu_2_0:data=this._funcDataObj[1];break;case this.bu_1_0:case this.bu_2_1:data=this._funcDataObj[2]}this.doFun(data)},detailWin.prototype.doFun=function(data){var runScript=this._car;switch(Number(data.func)){case 1:var isOnRoad=runScript.goToPos(pathFinding_1.default.xiePoint.passX,pathFinding_1.default.xiePoint.passY,carMgr_1.default.XIEHUO);break;case 2:isOnRoad=runScript.goToPos(pathFinding_1.default.bangPoint.passX,pathFinding_1.default.bangPoint.passY,carMgr_1.default.GUOBANG);break;case 3:isOnRoad=runScript.goToPos(pathFinding_1.default.rightInPoint.passX,pathFinding_1.default.rightInPoint.passY,carMgr_1.default.RUKOU)}null==isOnRoad?tipsWin_1.default.open("正在操作中"+pathFinding_1.default.rightInPoint):tipsWin_1.default.open(isOnRoad?"正在前往":"当前车辆不在路线上"),this.closeWin()},detailWin.openWin=function(data){this._win||(this._win=new detailWin),this._win._car=data,this._win.open(!0)},detailWin}(layaMaxUI_1.ui.win.detailViewUI);exports.default=detailWin},{"../../mgr/dataMgr":4,"../../mgr/pathFinding":6,"../../script/car/carMgr":38,"../../ui/layaMaxUI":44,"../../util/Eventer":45,"./tipsWin":27}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),Eventer_1=require("../../util/Eventer"),liaoCangWin=function(_super){function liaoCangWin(){return _super.call(this)||this}return __extends(liaoCangWin,_super),liaoCangWin.prototype.onEnable=function(){var cangLiangSpr=this._tank.sprCangLiao3d;this.la_name.text=cangLiangSpr.name,this.la_left.changeText(Math.floor(100*this._tank.quantityIndex)+"%"),this.la_maxQuantity.text=this._tank.maxQuantity+"",this.la_metrialName.text=this._tank.material.name,this.la_metrialQuantity.text=this._tank.material.quantity+"",this.la_metrialType.text=this._tank.material.type,this.img_index.right=201*(1-this._tank.quantityIndex),this.ani_tank.interval=80,this.ani_tank.loadAtlas("res/atlas/ani/tank.atlas",null,"tank").play(0,!0,"tank"),this.bu_close.on(Laya.Event.CLICK,this,this.close),Eventer_1.default.getInstance().on(Eventer_1.default.OPEN_INSIDE,this,function(){this.visible=!1}),Eventer_1.default.getInstance().on(Eventer_1.default.CLOSE_INSIDE,this,function(){this.visible=!0})},liaoCangWin.prototype.close=function(){for(var j=0;j<8;j++)this._tank.sprite3d.getChildByName("part"+j).active=!0;_super.prototype.close.call(this)},liaoCangWin.prototype.clickHandler=function(e){},liaoCangWin.openIt=function(tk){this._win||(this._win=new liaoCangWin),this._win._tank=tk,this._win.open(!0)},liaoCangWin}(layaMaxUI_1.ui.win.liaoCangWinUI);exports.default=liaoCangWin},{"../../ui/layaMaxUI":44,"../../util/Eventer":45}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tipsWin=function(_super){function tipsWin(){var _this=_super.call(this)||this;return _this.index=0,_this}return __extends(tipsWin,_super),tipsWin.prototype.onEnable=function(){this.bu_change.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_1.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_2.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_3.on(Laya.Event.CLICK,this,this.clickHandler),this.bu_close.on(Laya.Event.CLICK,this,this.close),this.bu_sure.on(Laya.Event.CLICK,this,this.close),window.videoWin=this.bg},tipsWin.open=function(str){var tpWin=new tipsWin;Laya.timer.frameOnce(5,this,function(){tpWin.spr_video.visible=!1,tpWin.spr_tips.visible=!0,tpWin.la_desc.text=str,tpWin.popup(!1,!0)})},tipsWin.openVideo=function(){var tpWin=new tipsWin;Laya.timer.frameOnce(5,this,function(){tpWin.spr_video.visible=!0,tpWin.spr_tips.visible=!1;window.videojs("myVideo",{bigPlayButton:!1,textTrackDisplay:!1,posterImage:!1,errorDisplay:!1,controlBar:{captionsButton:!1,chaptersButton:!1,subtitlesButton:!1,liveDisplay:!1,playbackRateMenuButton:!1}},function(){this.play(),(videoElement=Laya.Browser.document.getElementById("myVideo_html5_api")).style.display="block ";var videoElement=Laya.Browser.document.getElementById("myVideo");videoElement.style.zIndex=""+(Laya.Render.canvas.style.zIndex+1),videoElement.style.display="block ",Laya.timer.frameOnce(5,this,function(){Laya.Utils.fitDOMElementInArea(videoElement,window.videoWin,0,0,window.videoWin.width,window.videoWin.height)}),Laya.stage.on(Laya.Event.RESIZE,this,Laya.Utils.fitDOMElementInArea,[videoElement,window.videoWin,0,0,window.videoWin.width,window.videoWin.height])});tpWin.popup(!1,!0)})},tipsWin.prototype.clickHandler=function(e){var srcAry=[{type:"application/x-mpegURL",src:"http://hls.open.ys7.com/openlive/cefea6748e864fb38061330f04db053c.m3u8"},{type:"application/x-mpegURL",src:"http://hls.open.ys7.com/openlive/f1794fab0ecc431eb204549a48050ab4.m3u8"},{type:"application/x-mpegURL",src:"http://hls.open.ys7.com/openlive/4b300e7e9f2c4df9a6f460794d61ed4c.m3u8"},{type:"application/x-mpegURL",src:"http://hls.open.ys7.com/openlive/6cdd7192218a4876b12de87b033c288c.m3u8"},{type:"application/x-mpegURL",src:"http://ivi.bupt.edu.cn/hls/cctv6hd.m3u8"}];switch(this.bu_1.selected=this.bu_2.selected=this.bu_3.selected=!1,e.currentTarget){case this.bu_1:this.index=0,this.bu_1.selected=!0;break;case this.bu_2:this.index=1,this.bu_2.selected=!0;break;case this.bu_3:this.index=2,this.bu_3.selected=!0;break;case this.bu_change:this.index=this.index>=srcAry.length?0:this.index+1}window.videojs("myVideo").src(srcAry[this.index])},tipsWin.prototype.onClosed=function(){var videoElement=Laya.Browser.document.getElementById("myVideo");videoElement&&(videoElement.style.display="none")},tipsWin}(require("../../ui/layaMaxUI").ui.win.tipsWinUI);exports.default=tipsWin},{"../../ui/layaMaxUI":44}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var layaMaxUI_1=require("../../ui/layaMaxUI"),soundMgr_1=require("../../mgr/soundMgr"),warningWin=function(_super){function warningWin(){return _super.call(this)||this}return __extends(warningWin,_super),warningWin.prototype.onOpened=function(){this.bu_click.on(Laya.Event.CLICK,this,this.close)},warningWin.openWin=function(){var pop=new warningWin;Laya.timer.frameOnce(2,this,function(){soundMgr_1.default.getInstance().playSound(soundMgr_1.default.WARNING_MP3,3),pop.popup(!0,!0)})},warningWin.prototype.onClosed=function(){soundMgr_1.default.getInstance().stopSound(soundMgr_1.default.WARNING_MP3)},warningWin}(layaMaxUI_1.ui.win.warningWinUI);exports.default=warningWin},{"../../mgr/soundMgr":7,"../../ui/layaMaxUI":44}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("../mgr/gameMgr"),Eventer_1=require("../util/Eventer"),CameraMoveScript=function(_super){function CameraMoveScript(){var _this=_super.call(this)||this;return _this._tempVector3=new Laya.Vector3,_this.yawPitchRoll=new Laya.Vector3,_this.resultRotation=new Laya.Quaternion,_this.isMouseDown=!1,_this.rotaionSpeed=3e-5,_this._isleftControl=!1,_this.isGo=!1,_this._isStaticMove=!0,_this._isRight=!1,_this._isGoing=!1,_this}return __extends(CameraMoveScript,_super),Object.defineProperty(CameraMoveScript.prototype,"isStaticMove",{get:function(){return this._isStaticMove},set:function(bo){this._isStaticMove=bo},enumerable:!0,configurable:!0}),CameraMoveScript.prototype.updateRotation=function(){Math.abs(this.yawPitchRoll.y)<1.4&&(Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x,this.yawPitchRoll.y,this.yawPitchRoll.z,this.resultRotation),this.resultRotation.cloneTo(this.camera.transform.localRotation),this.camera.transform.localRotation=this.camera.transform.localRotation)},CameraMoveScript.prototype.onAwake=function(){this._sc=this.owner.scene.parent,Laya.Browser.onMobile?(Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp)):(this._sc.on(Laya.Event.RIGHT_MOUSE_DOWN,this,this.mouseDown),this._sc.on(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp)),this.camera=this.owner,this._sc.on(Laya.Event.MOUSE_WHEEL,this,this.wheelFun)},CameraMoveScript.prototype.wheelFun=function(e){e.delta>0?this.moveForward(-1):this.moveForward(1)},CameraMoveScript.prototype.onUpdate=function(){var elapsedTime=Laya.timer.delta;this.owner.scene;switch((Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.W)||Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.UP))&&this.moveForward(-.005*elapsedTime),(Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.S)||Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.DOWN))&&this.moveForward(.005*elapsedTime),(Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.A)||Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.LEFT))&&this.moveRight(-.005*elapsedTime),(Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.D)||Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.RIGHT))&&this.moveRight(.005*elapsedTime),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.Q)&&this.moveVertical(.005*elapsedTime),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.E)&&this.moveVertical(-.005*elapsedTime),this._isStaticMove=this._isGoing?this._isGoing:Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.G),gameMgr_1.default.getInstance().getNowDir()){case gameMgr_1.default.UP:this.moveForward(-.005*elapsedTime);break;case gameMgr_1.default.DOWN:this.moveForward(.005*elapsedTime);break;case gameMgr_1.default.LEFT:this.moveRight(-.005*elapsedTime);break;case gameMgr_1.default.RIGHT:this.moveRight(.005*elapsedTime)}if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&this.isMouseDown){this._isStaticMove=!1;var offsetX=this._sc.mouseX-this.lastMouseX,offsetY=this._sc.mouseY-this.lastMouseY,yprElem=this.yawPitchRoll;yprElem.x-=offsetX*this.rotaionSpeed*elapsedTime,yprElem.y-=offsetY*this.rotaionSpeed*elapsedTime,this.updateRotation()}this.lastMouseX=this._sc.mouseX,this.lastMouseY=this._sc.mouseY;var spr=this.LookAtPosition;this._positonV3&&this._isStaticMove&&(this.camera.transform.position=this._positonV3,this.camera.transform.lookAt(spr?spr.transform.position:new Laya.Vector3(0,0,0),new Laya.Vector3(0,1,0))),this._rotation,(!this._rotation&&!this._positonV3&&this._isStaticMove||this.isGo)&&(this.rotaPoint(),this.camera.transform.lookAt(spr?spr.transform.position:new Laya.Vector3(0,0,0),new Laya.Vector3(0,1,0))),this.checkPosition()},CameraMoveScript.prototype.onDestroy=function(){this._sc.off(Laya.Event.RIGHT_MOUSE_DOWN,this,this.mouseDown),this._sc.off(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp)},CameraMoveScript.prototype.mouseDown=function(e){if(Laya.Browser.onMobile)if(this._isleftControl){if(e.stageX>Laya.stage.width/2||this.isMouseDown)return}else if(e.stageX<Laya.stage.width/2||this.isMouseDown)return;this.setLookAtPosition(null),this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=this._sc.mouseX,this.lastMouseY=this._sc.mouseY,this.isMouseDown=!0},CameraMoveScript.prototype.mouseUp=function(e){this.isMouseDown=!1},CameraMoveScript.prototype.moveForward=function(distance){this._tempVector3.x=this._tempVector3.y=0,this._tempVector3.z=distance,this.camera.transform.translate(this._tempVector3)},CameraMoveScript.prototype.moveRight=function(distance){this._isRight=distance>0,this._tempVector3.y=this._tempVector3.z=0,this._tempVector3.x=distance,this.camera.transform.translate(this._tempVector3)},CameraMoveScript.prototype.moveVertical=function(distance){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=distance,this.camera.transform.translate(this._tempVector3)},CameraMoveScript.prototype.checkPosition=function(){var v3Po=this.camera.transform.position;(v3Po.y>60||v3Po.y<10)&&(v3Po.y=v3Po.y>10?60:10),Math.abs(v3Po.x)>80&&(v3Po.x=v3Po.x>0?80:-80),Math.abs(v3Po.z)>80&&(v3Po.z=v3Po.z>0?80:-80),this.camera.transform.position=v3Po},CameraMoveScript.prototype.rotaPoint=function(){this.camera.scene;var spr=this.LookAtPosition;if(spr)var dis=Laya.Vector3.distance(spr.transform.position,this.camera.transform.position);spr&&spr.parent&&"车辆"==spr.parent.name?dis>=15&&(this.moveForward(-.008*(dis>25?1:(dis-15)/10)*Laya.timer.delta),this.moveVertical(.003*(dis>25?1:(dis-15)/10)*Laya.timer.delta)):spr&&spr.parent&&(spr.parent.name,1)?(dis>=30&&(this.moveForward(-.008*(dis>45?1:(dis-30)/10)*Laya.timer.delta),this.moveVertical(.003*(dis>45?1:(dis-30)/10)*Laya.timer.delta)),this._isStaticMove&&this.moveRight(this._isRight?.1:-.1)):(dis>=15&&this.moveForward(-.008*(dis>20?1:(dis-15)/10)*Laya.timer.delta),dis<=16&&(this.isGo=!1))},CameraMoveScript.prototype.gotoPoint=function(bi){if(void 0===bi&&(bi=null),this._isStaticMove=!0,this._isGoing=!0,Eventer_1.default.getInstance().updateModel(Eventer_1.default.GOING_TO_POINT),!bi)bi=this.LookAtPosition;var q4=this.camera.transform.lookAt(bi.transform.position,new Laya.Vector3(0,1,0),!1,!0);this._rotation||(this._rotation=new Laya.Quaternion(0,0,0,0));var i=0,cq4=this.camera.transform.localRotation;Laya.timer.loop(20,this,function(){if(i++,Laya.Quaternion.slerp(cq4,q4,.05*i,this._rotation),this.camera.transform.localRotation=this._rotation,i>20){this._rotation=null,this._positonV3||(this._positonV3=new Laya.Vector3(this.camera.transform.position.x,this.camera.transform.position.y,this.camera.transform.position.z));var ti=60*Laya.Vector3.distance(bi.transform.position,this.camera.transform.position),biPos=this.checkBiPostion(bi.transform.position.x,bi.transform.position.z);Laya.Tween.to(this._positonV3,{x:biPos[0],y:biPos[1],z:biPos[2]},ti,Laya.Ease.quadOut,Laya.Handler.create(this,function(){this._positonV3=null,this._isStaticMove=!1,this._isGoing=!1,Eventer_1.default.getInstance().updateModel(Eventer_1.default.TO_POINT_OVER)})),Laya.timer.clearAll(this)}})},CameraMoveScript.prototype.lookAt=function(spr){if(void 0===spr&&(spr=null),spr||(spr=this.LookAtPosition),spr){var q4=this.camera.transform.lookAt(spr.transform.position,new Laya.Vector3(0,1,0),!1,!0);this._rotation||(this._rotation=new Laya.Quaternion(0,0,0,0));var i=0,cq4=this.camera.transform.localRotation;Laya.timer.loop(20,this,function(){i++,Laya.Quaternion.slerp(cq4,q4,.05*i,this._rotation),this.camera.transform.localRotation=this._rotation,i>20&&(this._rotation=null,Laya.timer.clearAll(this))})}},CameraMoveScript.prototype.setLookAtPosition=function(spr,isNeedLookAt,isNeedGo){void 0===isNeedLookAt&&(isNeedLookAt=!0),void 0===isNeedGo&&(isNeedGo=!1),this._lookAtPosition=spr,!this.isStaticMove&&isNeedLookAt&&this.lookAt(),this.isGo=isNeedGo},Object.defineProperty(CameraMoveScript.prototype,"LookAtPosition",{get:function(){return this._lookAtPosition},enumerable:!0,configurable:!0}),CameraMoveScript.prototype.checkBiPostion=function(x,z){var v3Po=this.camera.transform.position,y=v3Po.y;return x+=4,z+=0,Math.abs(x)>30&&Math.abs(z)>30?(x=x>0?x+18:x-18,z=z>0?z+18:z-18):Math.abs(x)>Math.abs(z)?x=x>0?x+18:x-18:z=z>0?z+18:z-18,y=Math.abs(x)>25||Math.abs(z)>25?10:20,x-=4,z-=0,Math.abs(v3Po.x-x)<5&&(x=x>0?x+=5:x-=5),Math.abs(v3Po.z-z)<5&&(z=x>0?z+=5:z-=5),[x,y,z]},CameraMoveScript}(Laya.Script3D);exports.default=CameraMoveScript},{"../mgr/gameMgr":5,"../util/Eventer":45}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var autoScene=function(_super){function autoScene(){var _this=_super.call(this)||this;return _this.onMobile=!0,_this}return __extends(autoScene,_super),autoScene.prototype.onAwake=function(){var sc=this.owner;(this.onMobile&&Laya.Browser.onMobile||!this.onMobile)&&(sc.height=Laya.Browser.height*(1920/Laya.Browser.width))},autoScene}(Laya.Script);exports.default=autoScene},{}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tankFactory_1=require("./tankBuild/tankFactory"),controlRoom_1=require("./controlBuild/controlRoom"),noManScale_1=require("./noManScale/noManScale"),finishedFactory_1=require("./finishedBuild/finishedFactory"),powerFactory_1=require("./powerBuild/powerFactory"),Eventer_1=require("../../util/Eventer"),building=function(_super){function building(){return _super.call(this)||this}return __extends(building,_super),building.prototype.onAwake=function(){this._sprite3d=this.owner,this.tankFactorySc=this._sprite3d.getChildByName("tankBuild").addComponent(tankFactory_1.default),this.controlRoomSc=this._sprite3d.getChildByName("controlBulid").addComponent(controlRoom_1.default),this.noManScaleSc=this._sprite3d.getChildByName("noManScale").addComponent(noManScale_1.default),this.finishedFactorySc=this._sprite3d.getChildByName("finishBuild").addComponent(finishedFactory_1.default),this.powerFactorySc=this._sprite3d.getChildByName("powerBuild").addComponent(powerFactory_1.default),this.inSideSpr3d=this._sprite3d.getChildByName("innterStation"),this.inSideSpr3d.active=!1},building.prototype.openInSide=function(){Eventer_1.default.getInstance().updateModel(this.inSideSpr3d.active?Eventer_1.default.CLOSE_INSIDE:Eventer_1.default.OPEN_INSIDE),this.inSideSpr3d.active=!this.inSideSpr3d.active,this.finishedFactorySc.spr3d.active=!this.inSideSpr3d.active,this.powerFactorySc.spr3d.active=!this.inSideSpr3d.active},building}(Laya.Script3D);exports.default=building},{"../../util/Eventer":45,"./controlBuild/controlRoom":32,"./finishedBuild/finishedFactory":33,"./noManScale/noManScale":34,"./powerBuild/powerFactory":35,"./tankBuild/tankFactory":37}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("../../../mgr/gameMgr"),buildingWin_1=require("../../../scene/win/buildingWin"),transportOrder_1=require("../../../model/order/transportOrder"),controlRoom=function(_super){function controlRoom(){var _this=_super.call(this)||this;return _this.isOpenInside=!1,_this}return __extends(controlRoom,_super),controlRoom.prototype.onAwake=function(){this.spr3d=this.owner},controlRoom.prototype.openInside=function(isOpen){this.isOpenInside=isOpen,this.spr3d.getChildByName("controlRoom").getChildByName("roomWall").active=!isOpen},controlRoom.prototype.openWin=function(){gameMgr_1.default.getInstance().camera.setLookAtPosition(this.spr3d),buildingWin_1.default.openDIY(this.spr3d)},controlRoom.prototype.pushTransportOrder=function(data){this.transOrders=[];for(var i=0;i<data.length;i++){var orders=new transportOrder_1.default;orders.taskId=data[i]["生产任务编号"],orders.sendTime=data[i]["发货时间"],orders.sendNum=data[i]["发货方量"],orders.projectName=data[i]["工程名称"],orders.productSign=data[i]["产品标号"],orders.PouringSite=data[i]["浇注部位"],orders.orderId=data[i]["序号"],this.transOrders.push(orders)}},controlRoom}(Laya.Script3D);exports.default=controlRoom},{"../../../mgr/gameMgr":5,"../../../model/order/transportOrder":8,"../../../scene/win/buildingWin":24}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var buildingWin_1=require("../../../scene/win/buildingWin"),soundMgr_1=require("../../../mgr/soundMgr"),gameMgr_1=require("../../../mgr/gameMgr"),finishedFactory=function(_super){function finishedFactory(){return _super.call(this)||this}return __extends(finishedFactory,_super),finishedFactory.prototype.onAwake=function(){this.spr3d=this.owner},finishedFactory.prototype.openWin=function(){soundMgr_1.default.getInstance().playSound(soundMgr_1.default.FACTORY_WORK),gameMgr_1.default.getInstance().camera.setLookAtPosition(this.spr3d),buildingWin_1.default.openDIY(this.spr3d)},finishedFactory}(Laya.Script3D);exports.default=finishedFactory},{"../../../mgr/gameMgr":5,"../../../mgr/soundMgr":7,"../../../scene/win/buildingWin":24}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("../../../mgr/gameMgr"),buildingWin_1=require("../../../scene/win/buildingWin"),noManScale=function(_super){function noManScale(){var _this=_super.call(this)||this;return _this._rotaionX=89,_this}return __extends(noManScale,_super),noManScale.prototype.onEnable=function(){this.spr3d=this.owner},noManScale.prototype.onUpdate=function(){},noManScale.prototype.aimAlready=function(){},noManScale.prototype.playAni=function(spr,isOut){void 0===isOut&&(isOut=!1),this._rightNowSpr=spr,Laya.Tween.to(this,{_rotaionX:isOut?179:0},500,null,Laya.Handler.create(this,function(){Laya.Tween.to(this,{_rotaionX:89},500,null,Laya.Handler.create(this,function(){this._rightNowSpr=null,this.playAni(this._inLanOut,!0)}))}))},noManScale.prototype.openWin=function(){gameMgr_1.default.getInstance().camera.setLookAtPosition(this.spr3d),buildingWin_1.default.openDIY(this.spr3d)},noManScale}(Laya.Script3D);exports.default=noManScale},{"../../../mgr/gameMgr":5,"../../../scene/win/buildingWin":24}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var buildingWin_1=require("../../../scene/win/buildingWin"),displayItem_1=require("../../../scene/item/displayItem"),soundMgr_1=require("../../../mgr/soundMgr"),gameMgr_1=require("../../../mgr/gameMgr"),powerFactory=function(_super){function powerFactory(){var _this=_super.call(this)||this;return _this._index=0,_this}return __extends(powerFactory,_super),powerFactory.prototype.onAwake=function(){this.spr3d=this.owner,this.display1=new displayItem_1.default,this.display2=new displayItem_1.default,this._display1Spr=this.owner.getChildByName("led_0"),this._display2Spr=this.owner.getChildByName("led_1"),this._display1SprMesh=new Laya.BlinnPhongMaterial,this._display2SprMesh=new Laya.BlinnPhongMaterial},powerFactory.prototype.onLateUpdate=function(){this._index++,this._index%3&&(this._index%2&&this._display2Spr._render._visible?(this._display2SprMesh.albedoTexture=this.display2.drawToCanvas(this.display2.width,this.display2.height,0,0).getTexture().bitmap,this._display2Spr.meshRenderer.material=this._display2SprMesh):this._display1Spr._render._visible&&(this._display1SprMesh.albedoTexture=this.display1.drawToCanvas(this.display1.width,this.display1.height,0,0).getTexture().bitmap,this._display1Spr.meshRenderer.material=this._display1SprMesh),this._index>2e3&&(this._index=0))},powerFactory.prototype.openWin=function(){soundMgr_1.default.getInstance().playSound(soundMgr_1.default.FACTORY_WORK),gameMgr_1.default.getInstance().camera.setLookAtPosition(this.spr3d),buildingWin_1.default.openDIY(this.spr3d)},powerFactory}(Laya.Script3D);exports.default=powerFactory},{"../../../mgr/gameMgr":5,"../../../mgr/soundMgr":7,"../../../scene/item/displayItem":11,"../../../scene/win/buildingWin":24}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var liaoCangWin_1=require("../../../scene/win/liaoCangWin"),gameMgr_1=require("../../../mgr/gameMgr"),liaoCangTips_1=require("../../../scene/item/liaoCangTips"),material_1=require("../../car/common/material"),tank=function(_super){function tank(){var _this=_super.call(this)||this;return _this.maxQuantity=100,_this._i=0,_this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),_this._outHitResult=new Laya.HitResult,_this}return __extends(tank,_super),tank.prototype.onAwake=function(){this.material=new material_1.default,this.material.quantity=Math.floor(100*Math.random()),this.sprCangLiao3d=this.owner.getChildByName("rawMaterial"),this.quantityIndex=this.material.quantity/this.maxQuantity,this.sprite3d=this.owner,this.sprCangLiao3d.transform.localScaleY=this.quantityIndex,this.addTips()},tank.prototype.onLateUpdate=function(){this.updataSpr()},tank.prototype.clickAndOpenWin=function(){for(var v3=gameMgr_1.default.getInstance().camera.owner.transform.position,angle=this.getRad(this.sprite3d.transform.position.x,this.sprite3d.transform.position.z,v3.x,v3.z),i=0;i<8&&angle>45*i+22.5;i++);this.owner.getChildByName("part"+(0==i||8==i?7:8-i)).active=!1,this.owner.getChildByName("part"+(0==i||8==i?1:7-i)).active=!1,this.openWin()},tank.prototype.getRad=function(x1,y1,x2,y2){var x=x2-x1,y=y2-y1,angle=x/Math.sqrt(Math.pow(x,2)+Math.pow(y,2)),rad=Math.acos(angle);angle=180/(Math.PI/rad);return y2<y1&&(angle=360-angle),angle},tank.prototype.addTips=function(){var spr=new liaoCangTips_1.default(this.material.name+": "+Math.floor(100*this.quantityIndex)+"%");gameMgr_1.default.getInstance().mainScene.dWorldTips.addChild(spr),this._sprTips=spr},tank.prototype.updataSpr=function(){this._i++;var j=this.owner.getChildByName("rawMaterial"),gObj=this.owner.getChildByName("tips"),camera=gameMgr_1.default.getInstance().camera.owner,out=new Laya.Vector3(0,0,0);camera.viewport.project(gObj.transform.position,camera.projectionViewMatrix,out);var point=new Laya.Vector2(out.x/Laya.stage.clientScaleX,out.y/Laya.stage.clientScaleY);if(this._sprTips.pos(point.x,point.y),this._i>=10){if(camera.viewportPointToRay(point,this._ray),gameMgr_1.default.getInstance().Sscene.physicsSimulation.rayCast(this._ray,this._outHitResult),this._outHitResult.succeeded){var spr=this._outHitResult.collider.owner;this._sprTips.visible=j._render._visible&&"tankBuild"==spr.parent.parent.name}this._i=0}},tank.prototype.openWin=function(){liaoCangWin_1.default.openIt(this),gameMgr_1.default.getInstance().camera.setLookAtPosition(this.owner,!1,!0)},tank}(Laya.Script3D);exports.default=tank},{"../../../mgr/gameMgr":5,"../../../scene/item/liaoCangTips":14,"../../../scene/win/liaoCangWin":26,"../../car/common/material":41}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tank_1=require("./tank"),soundMgr_1=require("../../../mgr/soundMgr"),gameMgr_1=require("../../../mgr/gameMgr"),buildingWin_1=require("../../../scene/win/buildingWin"),tankFactory=function(_super){function tankFactory(){return _super.call(this)||this}return __extends(tankFactory,_super),tankFactory.prototype.onAwake=function(){this._spr3d=this.owner;var liaoCangs=this._spr3d.getChildByName("smallStocks")._children;liaoCangs=liaoCangs.concat(this._spr3d.getChildByName("BigStocks")._children);for(var i=0;i<liaoCangs.length;i++)liaoCangs[i].addComponent(tank_1.default)},tankFactory.prototype.openWin=function(){soundMgr_1.default.getInstance().playSound(soundMgr_1.default.FACTORY_PIDA),gameMgr_1.default.getInstance().camera.setLookAtPosition(this._spr3d),buildingWin_1.default.openDIY(this._spr3d)},tankFactory}(Laya.Script3D);exports.default=tankFactory},{"../../../mgr/gameMgr":5,"../../../mgr/soundMgr":7,"../../../scene/win/buildingWin":24,"./tank":36}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("../../mgr/gameMgr"),car_1=require("./common/car"),pathFinding_1=require("../../mgr/pathFinding"),Eventer_1=require("../../util/Eventer"),dataMgr_1=require("../../mgr/dataMgr"),driver_1=require("./common/driver"),carMgr=function(){function carMgr(){this._typeForCars={},this._funcCar={},this._driverNum=0,this.addEvent()}return carMgr.getInstance=function(){return this._instance||(this._instance=new carMgr,this._instance.init()),this._instance},carMgr.prototype.init=function(){this.setCar3dSpr()},carMgr.prototype.putInToCars=function(c){this._cars||(this._cars=[]),this._cars.push(c),this.orderCarInto(c)},carMgr.prototype.pareserCarData=function(data){for(var i=0;i<data.length;i++)switch(data[i].DB_CarType_ID){case 1:(newCar=this.addNewCar(car_1.carType.YouGuan)).carNumber=data[i].CarNO,newCar.carState=data[i].CarState;break;case 2:var newCar;(newCar=this.addNewCar(car_1.carType.JiaoBan)).carNumber=data[i].CarNO,newCar.carState=data[i].CarState}},carMgr.prototype.setCar3dSpr=function(){this._car3dSprite={};for(var cars=gameMgr_1.default.getInstance().Sscene.getChildByName("trucks")._children,i=0;i<cars.length;i++)cars[i].active=!1,this._car3dSprite[cars[i].name]=cars[i]},carMgr.prototype.addNewCar=function(ct){var carspr=Laya.Sprite3D.instantiate(this._car3dSprite[this.getCarNameByCarType(ct)],gameMgr_1.default.getInstance().Sscene.getChildByName("trucks"));return carspr.active=!0,carspr.addComponent(car_1.default)},carMgr.prototype.getCarNameByCarType=function(ct){switch(ct){case car_1.carType.FenGuan:return"powderTruck";case car_1.carType.JiaoBan:return"mixTruck";case car_1.carType.KaChe:return"truck";case car_1.carType.YouGuan:return"oilTruck"}},carMgr.prototype.putCarInFunc=function(carSc){carSc.aim&&(this._funcCar[carSc.aim]||(this._funcCar[carSc.aim]=[]),this._funcCar[carSc.aim].indexOf(car_1.default)<0&&this._funcCar[carSc.aim].push(carSc))},carMgr.prototype.getCarInFunc=function(func){if(this._funcCar[func])return this._funcCar[func][0]},carMgr.prototype.removeCarFromFunc=function(carSc){if(carSc.aim){var ind=this._funcCar[carSc.aim].indexOf(car_1.default);this._funcCar[carSc.aim]&&ind>=0&&(this._funcCar[carSc.aim].splice(ind,1),Eventer_1.default.getInstance().updateModel(Eventer_1.default.FUNC_CAR_UPDATA))}},carMgr.prototype.addEvent=function(){Eventer_1.default.getInstance().on(Eventer_1.default.CAR_ALREADY_AIM,this,this.carAim)},carMgr.prototype.carAim=function(carSc){this.putCarInFunc(carSc)},carMgr.prototype.getParkingPos=function(){for(var i=0;i<pathFinding_1.default.parkingPos.length;i++)if(!pathFinding_1.default.parkingPos[i].isUse)return pathFinding_1.default.parkingPos[i].isUse=!0,i},carMgr.prototype.resumParkingPos=function(i){pathFinding_1.default.parkingPos[i].isUse&&(pathFinding_1.default.parkingPos[i].isUse=!1)},carMgr.prototype.orderCarInto=function(c){this._typeForCars||(this._typeForCars={}),this._typeForCars[c.carType]||(this._typeForCars[c.carType]=[]),this._typeForCars[c.carType].push(c)},carMgr.prototype.getCarByType=function(type){if(this._typeForCars&&this._typeForCars[type])return this._typeForCars[type]},carMgr.prototype.getADriver=function(){var d=new driver_1.default;return dataMgr_1.default.getInstance().getBySheetName("driver",this._driverNum)?(d.init(this._driverNum),this._driverNum++,d):(d.init(0),d)},carMgr.prototype.rankCarPorking=function(data){for(var i=0;i<this._cars.length;i++)this._cars[i].isParking=!1;for(i=0;i<data.length;i++)for(var j=0;j<this._cars.length;j++)data[i].CarNo==this._cars[j].carNumber&&(this._cars[j].isParking=!0,this._cars[j].car3dSpr.transform.localPosition=new Laya.Vector3(pathFinding_1.default.parkingPos[i].x,this._cars[j].car3dSpr.transform.localPositionY,pathFinding_1.default.parkingPos[i].y))},carMgr.prototype.changeCarState=function(data){if(!this._cars||this._cars.length<=0)Laya.timer.once(1e3,this,this.changeCarState,data);else for(var i=0;i<data.length;i++){var cCar=this.findCarByCarNo(data[i].CarNO);cCar&&(cCar.carState=data[i].CarState)}},carMgr.prototype.findCarByCarNo=function(carNo){for(var i=0;i<this._cars.length;i++)if(this._cars[i].carNumber==carNo)return this._cars[i]},carMgr.prototype.getAimPos=function(str){switch(str){case carMgr.XIEHUO:return pathFinding_1.default.xiePoint;case carMgr.GUOBANG:return pathFinding_1.default.bangPoint;case carMgr.CHUKOU:return pathFinding_1.default.leftOutPoint;case carMgr.RUKOU:return pathFinding_1.default.rightInPoint}},carMgr.XIEHUO="XIEHUO",carMgr.GUOBANG="GUOBANG",carMgr.CHUKOU="CHUKOU",carMgr.RUKOU="RUKOU",carMgr}();exports.default=carMgr},{"../../mgr/dataMgr":4,"../../mgr/gameMgr":5,"../../mgr/pathFinding":6,"../../util/Eventer":45,"./common/car":39,"./common/driver":40}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var carType,dataMgr_1=require("../../../mgr/dataMgr"),carNumTips_1=require("../../../scene/item/carNumTips"),gameMgr_1=require("../../../mgr/gameMgr"),pathFinding_1=require("../../../mgr/pathFinding"),Eventer_1=require("../../../util/Eventer"),carMgr_1=require("./../carMgr"),material_1=require("./material"),detailWin_1=require("../../../scene/win/detailWin"),soundMgr_1=require("../../../mgr/soundMgr"),car=function(_super){function car(){var _this=_super.call(this)||this;return _this.carState=1,_this.speed=.1,_this._isDoing=!1,_this._isParking=!1,_this.isRight=!1,_this._v3Forward=new Laya.Vector3(0,0,0),_this._outHitResult=new Laya.HitResult,_this._privolPosition=new Laya.Vector3(0,0,0),_this._path=[],_this._ind=0,_this._i=0,_this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),_this}return __extends(car,_super),Object.defineProperty(car.prototype,"carNumber",{get:function(){return this._carNumber},set:function(str){this._carNumber=str,this.changeTips()},enumerable:!0,configurable:!0}),Object.defineProperty(car.prototype,"car3dSpr",{get:function(){return this._car3dSpr},set:function(spr){this._car3dSpr=spr},enumerable:!0,configurable:!0}),Object.defineProperty(car.prototype,"driver",{get:function(){return this._driver},set:function(d){this.driver&&(this.driver._car=null),d&&d.car!=this&&(d._car=this),this._driver=d},enumerable:!0,configurable:!0}),Object.defineProperty(car.prototype,"aim",{get:function(){return this._aim},set:function(str){this._aim=str},enumerable:!0,configurable:!0}),Object.defineProperty(car.prototype,"isParking",{get:function(){return this._isParking},set:function(bl){this._isParking=bl,this._isParking&&(this.clearPathTween(),this._path=[],this._ind=0,this._car3dSpr.transform.localRotationEulerY=90)},enumerable:!0,configurable:!0}),car.prototype.onAwake=function(){this.speed=.05,this._car3dSpr=this.owner,this._privolSpr=this.owner.getChildByName("anchor"),this._particle3d=this._privolSpr.getChildByName("smoke"),this.init()},car.prototype.init=function(){var data=dataMgr_1.default.getInstance().getCarDataByName(this.owner.name);this._guid=data.id,this.carType=data.carType,this._carNumber=data.carNum,this.desc=data.desc,this.carAniName=data.ani,this.funcButtonID=data.func,this.addTips(),carMgr_1.default.getInstance().putInToCars(this),this.driver=carMgr_1.default.getInstance().getADriver(),this.material=new material_1.default,this.noWorkTime=(new Date).getTime()},car.prototype.onUpdate=function(){if(this.updataTips(),this._path&&this._path.length>0)if(this._pathTweenObj)this._car3dSpr.transform.localPosition=this._v3Forward,this._privolSpr.transform.localPosition=this._privolPosition,pathFinding_1.default.getInstance().getIsRight(this._car3dSpr.transform.localPosition.x,this._car3dSpr.transform.localPosition.z)!=this.isRight&&this.privolTween(),this.isRight=pathFinding_1.default.getInstance().getIsRight(this._car3dSpr.transform.localPosition.x,this._car3dSpr.transform.localPosition.z);else{var num=this._path[this._ind];this._car3dSpr.transform.lookAt(new Laya.Vector3(num[0],this._car3dSpr.transform.localPositionY,num[1]),new Laya.Vector3(0,1,0),!0),this.pathTween()}else this._isDoing||this._isParking?this._pathTweenObj&&(this._car3dSpr.transform.localPosition=this._v3Forward):this._path=pathFinding_1.default.getInstance().ranDomPath(this._car3dSpr.transform.localPositionX,this._car3dSpr.transform.localPositionZ)},car.prototype.clearPathTween=function(){this._pathTweenObj&&(this._pathTweenObj.clear(),this._pathTweenObj=null)},car.prototype.pathTween=function(){if(this._path.length>0){this.clearPathTween();var ti=1e3*Laya.Vector3.distance(this._car3dSpr.transform.localPosition,new Laya.Vector3(this._path[this._ind][0],this._car3dSpr.transform.localPositionY,this._path[this._ind][1]))/this.speed/40;this._v3Forward=this._car3dSpr.transform.localPosition,this._pathTweenObj=Laya.Tween.to(this._v3Forward,{x:this._path[this._ind][0],z:this._path[this._ind][1]},ti,null,Laya.Handler.create(this,function(){this.clearPathTween(),this._ind++,this._ind>=this._path.length&&(this._path=[],this._ind=0,this.aim&&(carMgr_1.default.getInstance().putCarInFunc(this),this.doFunc()))}))}},car.prototype.privolTween=function(){var isR=pathFinding_1.default.getInstance().getIsRight(this._car3dSpr.transform.localPosition.x,this._car3dSpr.transform.localPosition.z);this._privolPosition=this._privolSpr.transform.localPosition,this._privolSpr.transform.localRotationEulerY=isR?172:188,this._privolTweenObj=Laya.Tween.to(this._privolPosition,{x:isR?1.1:0},500,null,Laya.Handler.create(this,function(){this._privolSpr.transform.localRotationEulerY=180}))},car.prototype.doFunc=function(){this._isDoing=!0;var pos=carMgr_1.default.getInstance().getAimPos(this.aim);if(carMgr_1.default.getInstance().getCarInFunc(this.aim)==this)if(this._isParking)this._isParking=!1,carMgr_1.default.getInstance().resumParkingPos(this._parkingNum),this._parkingNum=null,this.goToPos(pos.x,pos.y,this.aim);else if(pos.x==this._car3dSpr.transform.localPositionX&&pos.y==this._car3dSpr.transform.localPositionZ)switch(this.aim){case carMgr_1.default.XIEHUO:this.clearPathTween(),this._car3dSpr.transform.localRotationEulerY+=180,this._v3Forward=this._car3dSpr.transform.localPosition,Eventer_1.default.getInstance().updateModel(Eventer_1.default.XIEHUO_START,this),this._pathTweenObj=Laya.Tween.to(this._v3Forward,{x:this._v3Forward.x+3},5e3,null,Laya.Handler.create(this,function(){this.clearPathTween(),Laya.timer.once(1e4,this,function(){this._isDoing=!1,Eventer_1.default.getInstance().updateModel(Eventer_1.default.XIEHUO_END),this._car3dSpr.transform.localRotationEulerY-=180,carMgr_1.default.getInstance().removeCarFromFunc(this._car3dSpr),this.aim=null})}));break;default:this._car3dSpr.transform.localRotationEulerX=90,Laya.timer.once(1e4,this,function(){this._isDoing=!1,this._car3dSpr.transform.localRotationEulerX=0,carMgr_1.default.getInstance().removeCarFromFunc(this._car3dSpr),this.aim=null})}else this.goToPos(pos.x,pos.y,this.aim);else this._isParking||(this._parkingNum=carMgr_1.default.getInstance().getParkingPos(),this.goToPos(pathFinding_1.default.parkingPos[this._parkingNum].x,pathFinding_1.default.parkingPos[this._parkingNum].y,this.aim),this._isParking=!0)},car.prototype.goToPos=function(x,y,aim){if(void 0===aim&&(aim=null),this.aim&&this.aim!=aim)return null;var path=pathFinding_1.default.getInstance().findPath(this._car3dSpr.transform.localPositionX,this._car3dSpr.transform.localPositionZ,x,y);return path.length>0&&(this._path&&this._path.length>0&&(this.clearPathTween(),this._ind=0,this._aim=null),this._path=path),this._isDoing=null!=this.aim,this._aim=aim,this._isParking=!1,path&&path.length>0},car.prototype.addTips=function(){var j=this._privolSpr.getChildByName("license"),te=new Laya.Label(this._carNumber);te.fontSize=100,te.align="center",te.valign="middle",te.color="#000000",te.bgColor="#debb50",te.bold=!0;var mater=new Laya.BlinnPhongMaterial;mater.albedoTexture=te.drawToCanvas(te.width,te.height,0,0).getTexture().bitmap,j.meshRenderer.material=mater,this.carNumTips=new carNumTips_1.default(this),Laya.stage.addChild(this.carNumTips)},car.prototype.changeTips=function(){var j=this._privolSpr.getChildByName("license"),te=new Laya.Label(this._carNumber);te.fontSize=100,te.align="center",te.valign="middle",te.color="#000000",te.bgColor="#debb50",te.bold=!0;var mater=new Laya.BlinnPhongMaterial;mater.albedoTexture=te.drawToCanvas(te.width,te.height,0,0).getTexture().bitmap,j.meshRenderer.material=mater,this.carNumTips.updataData(this)},car.prototype.updataTips=function(){this._i++;var j=this._privolSpr.getChildByName("license"),camera=gameMgr_1.default.getInstance().camera.owner,out=new Laya.Vector3(0,0,0);camera.viewport.project(j.transform.position,camera.projectionViewMatrix,out);var point=new Laya.Vector2(out.x/Laya.stage.clientScaleX,out.y/Laya.stage.clientScaleY);if(this.carNumTips.pos(point.x,point.y),this._i>=10){if(camera.viewportPointToRay(point,this._ray),gameMgr_1.default.getInstance().Sscene.physicsSimulation.rayCast(this._ray,this._outHitResult),this._outHitResult.succeeded){var spr=this._outHitResult.collider.owner.parent;this.carNumTips.visible=j._render._visible&&spr==this.owner}this._i=0}},car.prototype.openCarWin=function(){detailWin_1.default.openWin(this);var particle3D=this._privolSpr.getChildByName("smoke");particle3D.particleSystem.play(),Laya.timer.once(2e3,this,function(){particle3D.particleSystem.stop()}),soundMgr_1.default.getInstance().playSound(soundMgr_1.default.CAR_MOVEING),gameMgr_1.default.getInstance().camera.setLookAtPosition(this.car3dSpr)},Object.defineProperty(car.prototype,"carTypeCN",{get:function(){if(!this._carTypeCN)switch(this.carType){case carType.JiaoBan:this._carTypeCN="搅拌车";break;case carType.YouGuan:this._carTypeCN="油罐车";break;case carType.KaChe:this._carTypeCN="卡车";break;case carType.FenGuan:this._carTypeCN="粉罐车"}return this._carTypeCN},enumerable:!0,configurable:!0}),car}(Laya.Script3D);exports.default=car,function(carType){carType[carType.JiaoBan=1]="JiaoBan",carType[carType.YouGuan=2]="YouGuan",carType[carType.KaChe=3]="KaChe",carType[carType.FenGuan=4]="FenGuan"}(carType=exports.carType||(exports.carType={}))},{"../../../mgr/dataMgr":4,"../../../mgr/gameMgr":5,"../../../mgr/pathFinding":6,"../../../mgr/soundMgr":7,"../../../scene/item/carNumTips":10,"../../../scene/win/detailWin":25,"../../../util/Eventer":45,"./../carMgr":38,"./material":41}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dataMgr_1=require("../../../mgr/dataMgr"),driver=function(){function driver(){}return Object.defineProperty(driver.prototype,"car",{get:function(){return this._car},set:function(c){this.car&&(this.car._driver=null),c&&c.driver!=this&&(c._driver=this),this._car=c},enumerable:!0,configurable:!0}),driver.prototype.init=function(id){var data=dataMgr_1.default.getInstance().getBySheetName("driver",id);this._guid=data.id,this.name=data.name,this.sex=data.sex,this.age=data.age},driver}();exports.default=driver},{"../../../mgr/dataMgr":4}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var material=function(){return function(){this._guid=0,this.name="水泥",this.quantity=10,this.type="低碱面123"}}();exports.default=material},{}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var lightSc=function(_super){function lightSc(){var _this=_super.call(this)||this;return _this._scale=1,_this._isAdd=!0,_this}return __extends(lightSc,_super),lightSc.prototype.onEnable=function(){this._lightBody=this.owner.getChildByName("light"),this._lightBody.meshRenderer.material.albedoColor=new Laya.Vector4(225,0,0,50)},lightSc.prototype.onUpdate=function(){var mesh=this._lightBody.meshRenderer.material;this._isAdd?this._scale+=.02:this._scale-=.02,this._scale>1&&(this._isAdd=!1,mesh.albedoColor=new Laya.Vector4(1,0,0,.8)),this._scale<.8&&(this._isAdd=!0,mesh.albedoColor=new Laya.Vector4(.5,0,0,.8))},lightSc}(Laya.Script3D);exports.default=lightSc},{}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Eventer_1=require("../util/Eventer"),signSc=function(_super){function signSc(){var _this=_super.call(this)||this;return _this._addNum=0,_this._isAdd=!0,_this._isAni=!1,_this}return __extends(signSc,_super),signSc.prototype.onAwake=function(){this.spr3d=this.owner.getChildByName("part_0"),this._v3=new Laya.Vector3(0,.05,0),this._posY=this.spr3d.transform.localPositionY,Eventer_1.default.getInstance().on(Eventer_1.default.GOING_TO_POINT,this,this.signAni),Eventer_1.default.getInstance().on(Eventer_1.default.TO_POINT_OVER,this,this.signAniOver)},signSc.prototype.signAni=function(){this._isAni=!0,this.owner.active=!0},signSc.prototype.signAniOver=function(){this._isAni=!1,this.owner.active=!1},signSc.prototype.onEnable=function(){},signSc.prototype.onDisable=function(){},signSc.prototype.onUpdate=function(){(this._isAni||this._addNum>=0)&&(this._isAdd?this._addNum+=.04:this._addNum-=.04,this._addNum>1&&(this._isAdd=!1),this._addNum<=0&&(this._isAdd=!0)),this.spr3d.transform.localPositionY=this._posY+this._addNum,this.spr3d.transform.rotate(this._v3,!1)},signSc}(Laya.Script3D);exports.default=signSc},{"../util/Eventer":45}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var REG=Laya.ClassUtils.regClass;!function(ui){!function(item){var carNumTipsUI=function(_super){function carNumTipsUI(){return _super.call(this)||this}return __extends(carNumTipsUI,_super),carNumTipsUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(carNumTipsUI.uiView)},carNumTipsUI.uiView={type:"View",props:{y:163,x:10,width:40,pivotY:163,pivotX:10,height:163},compId:2,child:[{type:"Image",props:{width:35,var:"img",top:0,skin:"common/img_kuang.png",sizeGrid:"46,17,40,17",right:0,left:0,height:164,bottom:0},compId:11},{type:"Label",props:{wordWrap:!0,var:"la_num",valign:"middle",top:10,text:"京BKF393",right:10,left:10,fontSize:18,font:"Microsoft YaHei",color:"#00ffff",bottom:25,align:"center"},compId:12}],loadList:["common/img_kuang.png"],loadList3D:[]},carNumTipsUI}(Laya.View);item.carNumTipsUI=carNumTipsUI,REG("ui.item.carNumTipsUI",carNumTipsUI);var displayItemUI=function(_super){function displayItemUI(){return _super.call(this)||this}return __extends(displayItemUI,_super),displayItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(displayItemUI.uiView)},displayItemUI.uiView={type:"View",props:{width:270,height:100},compId:2,child:[{type:"Sprite",props:{},compId:4,child:[{type:"Rect",props:{width:270,lineWidth:1,height:100,fillColor:"#000000"},compId:7}]},{type:"Label",props:{width:270,var:"la_right",valign:"middle",top:0,text:"车号：京BKB548\\n正在装货：水泥100吨",left:0,height:100,fontSize:25,font:"Microsoft YaHei",color:"#ff0400",bold:!1,align:"center"},compId:8},{type:"Label",props:{width:270,var:"la_next",valign:"middle",top:-100,text:"车号：京BKB548\\n正在装货：水泥100吨",left:0,height:100,fontSize:25,font:"Microsoft YaHei",color:"#ff0400",bold:!1,align:"center"},compId:11}],animations:[{nodes:[{target:11,keyframes:{y:[{value:-100,tweenMethod:"linearNone",tween:!0,target:11,key:"y",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"y",index:30}],x:[{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"x",index:0}]}},{target:8,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"y",index:0},{value:100,tweenMethod:"linearNone",tween:!0,target:8,key:"y",index:30},{value:-100,tweenMethod:"linearNone",tween:!0,target:8,key:"y",index:35}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:8,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:8,key:"visible",index:31},{value:!0,tweenMethod:"linearNone",tween:!1,target:8,key:"visible",index:35}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:[],loadList3D:[]},displayItemUI}(Laya.View);item.displayItemUI=displayItemUI,REG("ui.item.displayItemUI",displayItemUI);var funSelectItemUI=function(_super){function funSelectItemUI(){return _super.call(this)||this}return __extends(funSelectItemUI,_super),funSelectItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(funSelectItemUI.uiView)},funSelectItemUI.uiView={type:"View",props:{width:110,height:233},compId:2,child:[{type:"List",props:{y:0,x:0,width:111,var:"list",vScrollBarSkin:" ",spaceY:0,repeatX:1,height:233},compId:15,child:[{type:"mainViewSelectItem",props:{y:0,x:0,runtime:"scene/item/item/mainViewSelectItem.ts",renderType:"render"},compId:14}]}],loadList:[],loadList3D:[]},funSelectItemUI}(Laya.View);item.funSelectItemUI=funSelectItemUI,REG("ui.item.funSelectItemUI",funSelectItemUI);var liaoCangTipsUI=function(_super){function liaoCangTipsUI(){return _super.call(this)||this}return __extends(liaoCangTipsUI,_super),liaoCangTipsUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(liaoCangTipsUI.uiView)},liaoCangTipsUI.uiView={type:"View",props:{y:130,x:10,width:38,pivotY:130,pivotX:10,height:130},compId:2,child:[{type:"Image",props:{var:"img",top:0,skin:"common/img_kuang1.png",sizeGrid:"35,18,36,18",scaleY:1,scaleX:1,right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Label",props:{wordWrap:!0,var:"la_num",valign:"middle",top:10,text:"水泥:  39%",right:9,left:9,height:97,fontSize:17,font:"Microsoft YaHei",color:"#a7d1fd",bold:!1,align:"center"},compId:4}],loadList:["common/img_kuang1.png"],loadList3D:[]},liaoCangTipsUI}(Laya.View);item.liaoCangTipsUI=liaoCangTipsUI,REG("ui.item.liaoCangTipsUI",liaoCangTipsUI);var topBoxItemUI=function(_super){function topBoxItemUI(){return _super.call(this)||this}return __extends(topBoxItemUI,_super),topBoxItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(topBoxItemUI.uiView)},topBoxItemUI.uiView={type:"Scene",props:{width:1920,mouseThrough:!0,height:70},compId:2,child:[{type:"Box",props:{x:0,width:1920,var:"mouse_box",top:-70,height:70},compId:12,child:[{type:"Image",props:{y:0,x:0,var:"img_top",skin:"view1.0/top.png"},compId:4,child:[{type:"Label",props:{y:20,x:194,width:121,var:"bu_fun1",valign:"middle",height:42,fontSize:16,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:.8,align:"center"},compId:14},{type:"Label",props:{y:20,x:348,width:121,var:"bu_fun2",valign:"middle",height:42,fontSize:16,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:.8,align:"center"},compId:16},{type:"Label",props:{y:20,x:508,width:121,var:"bu_fun3",valign:"middle",height:42,fontSize:16,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:.8,align:"center"},compId:18},{type:"Label",props:{y:21.5,x:1290,width:121,var:"bu_video",valign:"middle",height:42,fontSize:16,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:1,align:"center"},compId:19},{type:"Label",props:{y:24,x:1462,width:44,var:"bu_sign",valign:"middle",height:34,fontSize:12,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:.8,align:"center"},compId:20},{type:"Label",props:{y:26,x:1512,width:44,var:"bu_exit",valign:"middle",height:34,fontSize:12,font:"Microsoft YaHei",color:"#ffffff",bold:!1,alpha:.8,align:"center"},compId:21}]}]}],loadList:["view1.0/top.png"],loadList3D:[]},topBoxItemUI}(Laya.Scene);item.topBoxItemUI=topBoxItemUI,REG("ui.item.topBoxItemUI",topBoxItemUI)}(ui.item||(ui.item={}))}(exports.ui||(exports.ui={})),function(ui){var item_1;(function(item){var mainViewSelectItemUI=function(_super){function mainViewSelectItemUI(){return _super.call(this)||this}return __extends(mainViewSelectItemUI,_super),mainViewSelectItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(mainViewSelectItemUI.uiView)},mainViewSelectItemUI.uiView={type:"View",props:{width:110,height:36},compId:2,child:[{type:"Button",props:{y:0,x:0,var:"bu_choose",stateNum:2,skin:"view1.0/bu_downput.png",labelSize:14,labelFont:"Microsoft YaHei",labelColors:"#333333,#333333",label:"地磅管理"},compId:8}],loadList:["view1.0/bu_downput.png"],loadList3D:[]},mainViewSelectItemUI}(Laya.View);item.mainViewSelectItemUI=mainViewSelectItemUI,REG("ui.item.item.mainViewSelectItemUI",mainViewSelectItemUI)})((item_1=ui.item||(ui.item={})).item||(item_1.item={}))}(exports.ui||(exports.ui={})),function(ui){!function(tabBox){!function(item){!function(car){var carViewUI=function(_super){function carViewUI(){return _super.call(this)||this}return __extends(carViewUI,_super),carViewUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(carViewUI.uiView)},carViewUI.uiView={type:"View",props:{width:300,height:100},compId:2,child:[{type:"Image",props:{y:0,x:0,width:300,var:"img_bg",skin:"tabBox/img_itemBgWhite.png",sizeGrid:"5,5,7,4",height:100},compId:10},{type:"Label",props:{y:39,x:0,width:27,var:"la_ind",valign:"middle",text:"1",height:22,fontSize:20,font:"SimSun",color:"#b45601",bold:!1,align:"center"},compId:13},{type:"Label",props:{y:47,x:24,text:"号",color:"#ffffff"},compId:14},{type:"Label",props:{y:21,x:63,width:76,text:"等待时长：",height:12,fontSize:15,color:"#ffffff"},compId:15},{type:"Label",props:{y:47,x:63,width:76,text:"运输货物：",height:12,fontSize:15,color:"#ffffff"},compId:16},{type:"Label",props:{y:72,x:63,width:76,text:"驾驶员：",rotation:0,height:12,fontSize:15,color:"#ffffff"},compId:17},{type:"Label",props:{y:47,x:134,width:97,var:"la_good",text:"水",height:15,fontSize:15,color:"#ffffff",align:"left"},compId:18},{type:"Label",props:{y:70,x:116,width:97,var:"la_driver",text:"小星",height:15,fontSize:15,color:"#ffffff",align:"left"},compId:19},{type:"Label",props:{y:16,x:166,width:119,var:"la_time",valign:"middle",text:"01:47",height:34,fontSize:30,color:"#00e0ff",align:"center"},compId:20}],loadList:["tabBox/img_itemBgWhite.png"],loadList3D:[]},carViewUI}(Laya.View);car.carViewUI=carViewUI,REG("ui.tabBox.item.car.carViewUI",carViewUI);var carViewItemUI=function(_super){function carViewItemUI(){return _super.call(this)||this}return __extends(carViewItemUI,_super),carViewItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(carViewItemUI.uiView)},carViewItemUI.uiView={type:"View",props:{width:300,height:339},compId:2,child:[{type:"Image",props:{x:0,top:0,skin:"tabBox/img_bu1.png"},compId:4,child:[{type:"Label",props:{y:10,x:13,width:47,var:"la_carType",text:"搅拌车",height:14,fontSize:15,color:"#ffffff"},compId:11}]},{type:"List",props:{x:0,width:300,var:"list",vScrollBarSkin:" ",top:30,elasticEnabled:!0,bottom:30},compId:10,child:[{type:"carView",props:{runtime:"scene/tabBox/item/car/carView.ts",renderType:"render"},compId:16}]},{type:"Box",props:{x:0,bottom:0},compId:26,child:[{type:"Image",props:{y:0,x:136,skin:"tabBox/img_line.png"},compId:9},{type:"Image",props:{y:0,x:66,visible:!1,var:"img_out",skin:"tabBox/img_bu2.png"},compId:5},{type:"Image",props:{y:1,x:0,visible:!1,var:"img_in",skin:"tabBox/img_bu3.png"},compId:6},{type:"Label",props:{y:8,x:19,width:47,text:"在厂",height:14,fontSize:15,color:"#ffffff"},compId:15},{type:"Label",props:{y:8,x:89,width:47,text:"出厂",height:14,fontSize:15,color:"#ffffff"},compId:14},{type:"Box",props:{y:0,x:0,width:68,var:"bu_in",height:30},compId:22},{type:"Box",props:{y:0,x:69,width:72,var:"bu_out",height:30},compId:24},{type:"Image",props:{y:29,x:0,width:300,skin:"tabBox/img_itemBgWhite.png",height:2,bottom:0},compId:25}]}],loadList:["tabBox/img_bu1.png","tabBox/img_line.png","tabBox/img_bu2.png","tabBox/img_bu3.png","tabBox/img_itemBgWhite.png"],loadList3D:[]},carViewItemUI}(Laya.View);car.carViewItemUI=carViewItemUI,REG("ui.tabBox.item.car.carViewItemUI",carViewItemUI)}(item.car||(item.car={}))}(tabBox.item||(tabBox.item={}))}(ui.tabBox||(ui.tabBox={}))}(exports.ui||(exports.ui={})),function(ui){!function(tabBox){!function(item){var detailBoxItemUI=function(_super){function detailBoxItemUI(){return _super.call(this)||this}return __extends(detailBoxItemUI,_super),detailBoxItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(detailBoxItemUI.uiView)},detailBoxItemUI.uiView={type:"View",props:{width:300,height:385},compId:2,child:[{type:"Box",props:{var:"contentBox",top:0,left:300,bottom:0},compId:8,child:[{type:"Image",props:{y:0,x:0,width:300,skin:"tabBox/img_show.png"},compId:3},{type:"Label",props:{y:12,x:32,width:147,var:"la_name",valign:"middle",text:"搅拌车",height:20,fontSize:20,color:"#ffffff",align:"left"},compId:4},{type:"Box",props:{y:42,x:0,width:300,var:"itemBox",height:342},compId:6}]}],loadList:["tabBox/img_show.png"],loadList3D:[]},detailBoxItemUI}(Laya.View);item.detailBoxItemUI=detailBoxItemUI,REG("ui.tabBox.item.detailBoxItemUI",detailBoxItemUI);var rightTabBoxItemUI=function(_super){function rightTabBoxItemUI(){return _super.call(this)||this}return __extends(rightTabBoxItemUI,_super),rightTabBoxItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(rightTabBoxItemUI.uiView)},rightTabBoxItemUI.uiView={type:"View",props:{width:330,mouseThrough:!0},compId:2,child:[{type:"Image",props:{x:300,var:"img_bg",top:0,skin:"tabBox/img_unchoose.png",bottom:0},compId:4},{type:"Label",props:{y:10,x:307,wordWrap:!0,width:18,var:"la_title",valign:"middle",text:"显示面板",fontSize:16,color:"#ffffff",align:"center"},compId:7}],loadList:["tabBox/img_unchoose.png"],loadList3D:[]},rightTabBoxItemUI}(Laya.View);item.rightTabBoxItemUI=rightTabBoxItemUI,REG("ui.tabBox.item.rightTabBoxItemUI",rightTabBoxItemUI)}(tabBox.item||(tabBox.item={}))}(ui.tabBox||(ui.tabBox={}))}(exports.ui||(exports.ui={})),function(ui){!function(tabBox){!function(item){!function(display){var chooseItemUI=function(_super){function chooseItemUI(){return _super.call(this)||this}return __extends(chooseItemUI,_super),chooseItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(chooseItemUI.uiView)},chooseItemUI.uiView={type:"View",props:{width:135,height:25},compId:2,child:[{type:"Image",props:{y:0,x:0,width:135,skin:"tabBox/img_bg.png",height:25},compId:3},{type:"Image",props:{y:8,x:109,visible:!1,var:"la_choose",skin:"tabBox/img_right.png"},compId:4},{type:"Label",props:{y:7,x:14,width:91,var:"la_name",text:"搅拌车",height:12,font:"Arial",color:"#ffffff"},compId:5}],loadList:["tabBox/img_bg.png","tabBox/img_right.png"],loadList3D:[]},chooseItemUI}(Laya.View);display.chooseItemUI=chooseItemUI,REG("ui.tabBox.item.display.chooseItemUI",chooseItemUI);var diplayShowUI=function(_super){function diplayShowUI(){return _super.call(this)||this}return __extends(diplayShowUI,_super),diplayShowUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(diplayShowUI.uiView)},diplayShowUI.uiView={type:"View",props:{width:300,height:500},compId:2,child:[{type:"Box",props:{width:300,var:"contentBox",top:0,left:300,bottom:0},compId:15,child:[{type:"Image",props:{x:0,width:300,top:0,skin:"tabBox/img_show.png",sizeGrid:"67,32,60,35",bottom:0},compId:4},{type:"Image",props:{y:22.5,x:274,var:"bu_choose",skin:"tabBox/img_moreChoose.png"},compId:6},{type:"Image",props:{y:22.5,x:16,var:"bu_close",skin:"tabBox/img_return.png"},compId:7},{type:"Box",props:{width:300,var:"itemBox",top:44,bottom:0},compId:14},{type:"Label",props:{y:18,x:95,width:110,text:"显 示 面 板",height:22,fontSize:22,font:"Microsoft YaHei",color:"#ffffff"},compId:8},{type:"Image",props:{y:29,x:150,width:135,visible:!1,var:"chooseWin",skin:"tabBox/img_bg.png",sizeGrid:"3,4,4,3",height:190},compId:3,child:[{type:"List",props:{var:"list",vScrollBarSkin:" ",top:0,right:0,left:0,elasticEnabled:!0,bottom:0},compId:10,child:[{type:"chooseItem",props:{y:0,x:0,runtime:"scene/tabBox/item/displayItem/chooseItem.ts",renderType:"render"},compId:11}]}]}]}],loadList:["tabBox/img_show.png","tabBox/img_moreChoose.png","tabBox/img_return.png","tabBox/img_bg.png"],loadList3D:[]},diplayShowUI}(Laya.View);display.diplayShowUI=diplayShowUI,REG("ui.tabBox.item.display.diplayShowUI",diplayShowUI)}(item.display||(item.display={}))}(tabBox.item||(tabBox.item={}))}(ui.tabBox||(ui.tabBox={}))}(exports.ui||(exports.ui={})),function(ui){!function(tabBox){var rightTabBoxUI=function(_super){function rightTabBoxUI(){return _super.call(this)||this}return __extends(rightTabBoxUI,_super),rightTabBoxUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(rightTabBoxUI.uiView)},rightTabBoxUI.uiView={type:"Scene",props:{width:330,mouseThrough:!0,height:900},compId:2,child:[{type:"Box",props:{y:0,width:330,var:"tabBox",mouseThrough:!0,left:0,height:900},compId:7}],loadList:[],loadList3D:[]},rightTabBoxUI}(Laya.Scene);tabBox.rightTabBoxUI=rightTabBoxUI,REG("ui.tabBox.rightTabBoxUI",rightTabBoxUI)}(ui.tabBox||(ui.tabBox={}))}(exports.ui||(exports.ui={})),function(ui){!function(test){var controlItemUI=function(_super){function controlItemUI(){return _super.call(this)||this}return __extends(controlItemUI,_super),controlItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(controlItemUI.uiView)},controlItemUI.uiView={type:"View",props:{width:500,runtime:"scene/controlItem.ts",height:600},compId:2,child:[{type:"Image",props:{y:134,x:84,skin:"common/img_mask.png",alpha:.7},compId:9},{type:"Image",props:{y:199,x:149,skin:"common/img_mask1.png"},compId:10},{type:"Image",props:{y:300,x:250,var:"img_control",skin:"common/foot.png",sizeGrid:"22,13,21,12",anchorY:.5,anchorX:.5},compId:6}],loadList:["common/img_mask.png","common/img_mask1.png","common/foot.png"],loadList3D:[]},controlItemUI}(Laya.View);test.controlItemUI=controlItemUI,REG("ui.test.controlItemUI",controlItemUI);var mainSceneUI=function(_super){function mainSceneUI(){return _super.call(this)||this}return __extends(mainSceneUI,_super),mainSceneUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(mainSceneUI.uiView)},mainSceneUI.uiView={type:"Scene",props:{width:1920,runtime:"scene/mainScene.ts",positionVariance_0:100,maxPartices:100,height:1080},compId:1,child:[{type:"Image",props:{top:0,skin:"comp/hero2.jpg",right:0,left:0,bottom:0,alpha:1},compId:45,child:[{type:"Label",props:{y:352,x:645,width:629,var:"la_progress",text:"加载进度：0%",height:67,fontSize:80,color:"#ffffff",align:"center"},compId:22},{type:"Image",props:{y:589,skin:"common/img_indexBg.png",sizeGrid:"0,15,0,15",right:200,left:200,height:60},compId:51},{type:"Image",props:{y:589,var:"img_indexBg",skin:"common/img_index.png",sizeGrid:"0,15,0,15",right:201,left:200,height:60},compId:48,child:[{type:"Image",props:{y:0,var:"img_index",skin:"common/img_index.png",sizeGrid:"0,15,0,15",right:120,renderType:"mask",left:0},compId:52}]}]},{type:"Box",props:{y:0,x:0,var:"dWorld",top:0,right:0,mouseThrough:!1,left:0,bottom:0,alpha:1},compId:37},{type:"Box",props:{var:"dWorldTips",top:0,right:0,mouseThrough:!0,left:0,bottom:0},compId:73,child:[{type:"controlItem",props:{x:0,visible:!1,var:"mobileItem",mouseThrough:!1,mouseEnabled:!0,bottom:60,runtime:"scene/controlItem.ts"},compId:36},{type:"Button",props:{y:720,x:0,width:124,visible:!1,var:"bu_add",skin:"comp/button.png",labelSize:30,label:"返回",height:71},compId:55}]},{type:"Box",props:{visible:!1,var:"viewBox",top:1,right:0,mouseThrough:!0,left:0,bottom:0},compId:56,child:[{type:"topBoxItem",props:{visible:!1,runtime:"scene/item/topBoxItem.ts"},compId:76},{type:"rightTabBox",props:{y:110,x:1590,runtime:"scene/tabBox/rightTabBox.ts"},compId:78}]},{type:"Image",props:{y:974,x:0,width:141,visible:!1,var:"spr_tips",skin:"common/img_index.png",sizeGrid:"17,11,15,13",height:106,gray:!0,alpha:.8},compId:25,child:[{type:"Label",props:{var:"la_name",valign:"middle",top:0,text:"厂房",right:0,left:0,fontSize:50,color:"#3b140a",bottom:0,bold:!0,align:"center"},compId:26}]},{type:"Script",props:{y:1,x:0,onMobile:"true",enabled:!0,runtime:"script/autoScene.ts"},compId:38}],animations:[{nodes:[{target:45,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:45,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:45,key:"alpha",index:15}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["comp/hero2.jpg","common/img_indexBg.png","common/img_index.png","comp/button.png"],loadList3D:[]},mainSceneUI}(Laya.Scene);test.mainSceneUI=mainSceneUI,REG("ui.test.mainSceneUI",mainSceneUI)}(ui.test||(ui.test={}))}(exports.ui||(exports.ui={})),function(ui){!function(win){var buildingWinUI=function(_super){function buildingWinUI(){return _super.call(this)||this}return __extends(buildingWinUI,_super),buildingWinUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(buildingWinUI.uiView)},buildingWinUI.uiView={type:"Dialog",props:{x:0,width:880,height:580},compId:2,child:[{type:"Image",props:{y:10,x:10,skin:"winAssets/img_botton.png"},compId:79},{type:"Animation",props:{y:112,x:36,width:336,var:"ani_build",scaleY:.9,scaleX:.9,height:311,autoPlay:!0},compId:80},{type:"Image",props:{y:35,x:828,skin:"winAssets/img_close.png"},compId:81},{type:"Tab",props:{y:99,x:370,var:"bu_tab",stateNum:2,space:2,skin:"winAssets/img_grop1.png",selectedIndex:0,labels:"属性,其它",labelSize:25,labelFont:"Microsoft YaHei",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},compId:82},{type:"Image",props:{y:36,x:737,skin:"winAssets/img_item1.png"},compId:83},{type:"Label",props:{y:35,x:78,var:"la_name",text:"1号料仓",fontSize:30,font:"Microsoft YaHei",color:"#ffffff",bold:!0},compId:84},{type:"Image",props:{y:31,x:30,var:"img_icon",skin:"winAssets/icon/img_icon_tankBuild.png"},compId:85},{type:"Sprite",props:{y:13,x:790,width:80,var:"bu_close",height:80},compId:86},{type:"Sprite",props:{y:173,x:394,var:"settingBox"},compId:112,child:[{type:"Sprite",props:{y:0,x:0,width:465,var:"tab1",height:391},compId:87,child:[{type:"Label",props:{y:35,x:33.5,width:67,var:"bu_info",valign:"middle",text:"信息",scaleY:1,scaleX:1,height:35,fontSize:20,font:"Microsoft YaHei",color:"#00ffff",bold:!1,anchorY:1,anchorX:.5,align:"center"},compId:64},{type:"Label",props:{y:35,x:134.5,width:67,var:"bu_setting",valign:"middle",text:"设置",height:35,fontSize:20,font:"Microsoft YaHei",color:"#00ffff",anchorY:1,anchorX:.5,align:"center"},compId:65},{type:"Label",props:{y:35,x:234.5,width:67,var:"bu_diaodu",valign:"middle",text:"调度",height:35,fontSize:20,font:"Microsoft YaHei",color:"#00ffff",anchorY:1,anchorX:.5,align:"center"},compId:66},{type:"Label",props:{y:35,x:335.5,width:88,var:"bu_state",valign:"middle",text:"站内状态",height:35,fontSize:20,font:"Microsoft YaHei",color:"#00ffff",anchorY:1,anchorX:.5,align:"center"},compId:67},{type:"List",props:{x:67.5,width:345,var:"list",top:50,spaceY:15,bottom:0},compId:72,child:[{type:"Label",props:{y:9,x:22,width:311,text:"站点名称：百子湾搅拌站",renderType:"render",height:20,fontSize:18,font:"Microsoft YaHei",color:"#00ffff"},compId:73}]}]},{type:"Sprite",props:{y:9,x:0,var:"tab0"},compId:88,child:[{type:"Label",props:{width:100,text:"料仓剩余：",height:22,fontSize:20,color:"#ffffff"},compId:101},{type:"Label",props:{y:148,width:100,text:"材料名称：",height:22,fontSize:20,color:"#ffffff"},compId:102},{type:"Label",props:{y:188,width:100,text:"材料方量：",height:22,fontSize:20,color:"#ffffff"},compId:103},{type:"Label",props:{y:227,width:100,text:"核定容量：",height:22,fontSize:20,color:"#ffffff"},compId:104},{type:"Label",props:{y:268,width:100,text:"材料规格：",height:22,fontSize:20,color:"#ffffff"},compId:105},{type:"Label",props:{y:148,x:100,width:100,var:"la_desc0",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:106},{type:"Label",props:{y:188,x:100,width:100,var:"la_desc1",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:107},{type:"Label",props:{y:227,x:100,width:100,var:"la_desc2",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:108},{type:"Label",props:{y:268,x:100,width:100,var:"la_metrialType",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:109},{type:"Label",props:{y:46,x:1,width:367,var:"la_carNum",valign:"middle",text:"50%",height:40,fontSize:50,font:"Microsoft YaHei",color:"#ff760b",bold:!0,align:"left"},compId:110}]}]},{type:"Button",props:{y:508,x:720,var:"bu_inside",stateNum:2,skin:"view1.0/bu_downput.png",label:"内部"},compId:77}],loadList:["winAssets/img_botton.png","winAssets/img_close.png","winAssets/img_grop1.png","winAssets/img_item1.png","winAssets/icon/img_icon_tankBuild.png","view1.0/bu_downput.png"],loadList3D:[]},buildingWinUI}(Laya.Dialog);win.buildingWinUI=buildingWinUI,REG("ui.win.buildingWinUI",buildingWinUI);var detailViewUI=function(_super){function detailViewUI(){return _super.call(this)||this}return __extends(detailViewUI,_super),detailViewUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(detailViewUI.uiView)},detailViewUI.uiView={type:"Dialog",props:{width:880,isPopupCenter:!0,isModal:!1,height:580},compId:2,child:[{type:"Image",props:{y:10,x:10,skin:"winAssets/img_botton.png"},compId:116},{type:"Animation",props:{y:112,x:36,width:336,var:"ani_car",scaleY:.9,scaleX:.9,height:311,autoPlay:!0},compId:83},{type:"Image",props:{y:35,x:828,skin:"winAssets/img_close.png"},compId:118},{type:"Tab",props:{y:99,x:370,var:"bu_tab",stateNum:2,space:2,skin:"winAssets/img_grop1.png",selectedIndex:0,labels:"属性,其它",labelSize:25,labelFont:"Microsoft YaHei",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},compId:119},{type:"Image",props:{y:36,x:737,skin:"winAssets/img_item1.png"},compId:120},{type:"Label",props:{y:35,x:78,var:"la_name",text:"1号料仓",fontSize:30,font:"Microsoft YaHei",color:"#ffffff",bold:!0},compId:121},{type:"Image",props:{y:31,x:30,var:"img_icon",skin:"winAssets/icon/img_icon_oilTruck.png"},compId:122},{type:"Sprite",props:{y:13,x:790,width:80,var:"bu_close",height:80},compId:123},{type:"Sprite",props:{y:200,x:392,var:"tab1"},compId:137,child:[{type:"Button",props:{var:"bu0_0",stateNum:2,skin:"view1.0/bu_1.png",labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:92,child:[{type:"Label",props:{y:12,x:86,text:"进站",fontSize:20,color:"#ffffff"},compId:106}]},{type:"Button",props:{x:423,var:"bu0_1",stateNum:2,skin:"view1.0/bu_1.png",skewY:180,labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:93,child:[{type:"Label",props:{y:22,x:106,text:"出站",skewY:180,fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5},compId:109}]},{type:"Button",props:{y:94,x:1,var:"bu_1_0",stateNum:2,skin:"view1.0/bu_1.png",labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:94,child:[{type:"Label",props:{y:22,x:106,text:"装料",fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5},compId:108}]},{type:"Button",props:{y:94,x:424,var:"bu_1_1",stateNum:2,skin:"view1.0/bu_1.png",skewY:180,labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:95,child:[{type:"Label",props:{y:22,x:106,text:"卸料",skewY:180,fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5},compId:110}]},{type:"Button",props:{y:188,var:"bu_2_0",stateNum:2,skin:"view1.0/bu_1.png",labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:96,child:[{type:"Label",props:{y:22,x:106,text:"过磅",fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5},compId:111}]},{type:"Button",props:{y:188,x:423,var:"bu_2_1",stateNum:2,skin:"view1.0/bu_1.png",skewY:180,labelSize:24,labelColors:"#00ffff,#00ffff,#00ffff,#00ffff,#00ffff"},compId:97,child:[{type:"Label",props:{y:22,x:106,text:"回皮",skewY:180,fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5},compId:112}]}]},{type:"Sprite",props:{y:176,x:379,var:"tab0"},compId:138,child:[{type:"Label",props:{width:100,text:"车牌号码：",height:22,fontSize:20,color:"#ffffff"},compId:125},{type:"Label",props:{y:148,width:100,text:"材料名称：",height:22,fontSize:20,color:"#ffffff"},compId:126},{type:"Label",props:{y:188,width:100,text:"材料方量：",height:22,fontSize:20,color:"#ffffff"},compId:127},{type:"Label",props:{y:227,width:100,text:"核定容量：",height:22,fontSize:20,color:"#ffffff"},compId:128},{type:"Label",props:{y:268,x:0,width:100,text:"材料名称：",height:22,fontSize:20,color:"#ffffff"},compId:129},{type:"Label",props:{y:148,x:100,width:100,var:"la_desc0",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:130},{type:"Label",props:{y:188,x:100,width:100,var:"la_desc1",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:131},{type:"Label",props:{y:227,x:100,width:100,var:"la_desc2",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:132},{type:"Label",props:{y:268,x:100,width:100,var:"la_metrialType",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:133},{type:"Label",props:{y:46,x:1,width:367,var:"la_carNum",valign:"middle",text:"50%",height:40,fontSize:50,font:"Microsoft YaHei",color:"#ff760b",bold:!0,align:"left"},compId:124}]}],loadList:["winAssets/img_botton.png","winAssets/img_close.png","winAssets/img_grop1.png","winAssets/img_item1.png","winAssets/icon/img_icon_oilTruck.png","view1.0/bu_1.png"],loadList3D:[]},detailViewUI}(Laya.Dialog);win.detailViewUI=detailViewUI,REG("ui.win.detailViewUI",detailViewUI);var liaoCangWinUI=function(_super){function liaoCangWinUI(){return _super.call(this)||this}return __extends(liaoCangWinUI,_super),liaoCangWinUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(liaoCangWinUI.uiView)},liaoCangWinUI.uiView={type:"Dialog",props:{width:880,isModal:!0,height:580},compId:2,child:[{type:"Image",props:{y:10,x:9,skin:"winAssets/img_botton.png"},compId:74},{type:"Image",props:{y:35,x:827,skin:"winAssets/img_close.png"},compId:75},{type:"Tab",props:{y:99,x:369,stateNum:2,space:2,skin:"winAssets/img_grop1.png",selectedIndex:1,labels:"属性,其它",labelSize:25,labelFont:"Microsoft YaHei",labelColors:"#ffffff,#ffffff#ffffff#ffffff"},compId:78},{type:"Image",props:{y:36,x:736,skin:"winAssets/img_item1.png"},compId:79},{type:"Label",props:{y:35,x:77,var:"la_name",text:"1号料仓",fontSize:30,font:"Microsoft YaHei",color:"#ffffff",bold:!0},compId:81},{type:"Image",props:{y:31,x:29,skin:"winAssets/icon/img_icon.png"},compId:80},{type:"Sprite",props:{y:13,x:789,width:80,var:"bu_close",height:80},compId:68},{type:"Label",props:{y:222,x:379,width:156,var:"la_left",valign:"middle",text:"50%",height:40,fontSize:50,font:"Microsoft YaHei",color:"#ff760b",bold:!0,align:"left"},compId:55},{type:"Label",props:{y:176,x:378,width:100,text:"料仓剩余：",height:22,fontSize:20,color:"#ffffff"},compId:82},{type:"Label",props:{y:324,x:378,width:100,text:"材料名称：",height:22,fontSize:20,color:"#ffffff"},compId:83},{type:"Label",props:{y:364,x:378,width:100,text:"材料方量：",height:22,fontSize:20,color:"#ffffff"},compId:84},{type:"Label",props:{y:403,x:378,width:100,text:"核定容量：",height:22,fontSize:20,color:"#ffffff"},compId:85},{type:"Label",props:{y:443,x:378,width:100,text:"材料规格：",height:22,fontSize:20,color:"#ffffff"},compId:86},{type:"Label",props:{y:324,x:478,width:100,var:"la_metrialName",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:87},{type:"Label",props:{y:364,x:478,width:100,var:"la_metrialQuantity",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:88},{type:"Label",props:{y:403,x:478,width:100,var:"la_maxQuantity",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:89},{type:"Label",props:{y:443,x:478,width:100,var:"la_metrialType",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:90},{type:"Image",props:{y:277,x:378,width:201,skin:"winAssets/img_cf.png",height:26},compId:91,child:[{type:"Image",props:{y:0,var:"img_index",skin:"winAssets/img_cf2.png",sizeGrid:"0,4,0,3",right:0,left:0,height:26},compId:92},{type:"Image",props:{y:0,x:0,width:201,skin:"winAssets/img_cf.png",renderType:"mask",height:26},compId:93}]},{type:"Animation",props:{y:112,x:36,width:336,var:"ani_tank",scaleY:.9,scaleX:.9,height:311,autoPlay:!0},compId:95}],loadList:["winAssets/img_botton.png","winAssets/img_close.png","winAssets/img_grop1.png","winAssets/img_item1.png","winAssets/icon/img_icon.png","winAssets/img_cf.png","winAssets/img_cf2.png"],loadList3D:[]},liaoCangWinUI}(Laya.Dialog);win.liaoCangWinUI=liaoCangWinUI,REG("ui.win.liaoCangWinUI",liaoCangWinUI);var tipsWinUI=function(_super){function tipsWinUI(){return _super.call(this)||this}return __extends(tipsWinUI,_super),tipsWinUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(tipsWinUI.uiView)},tipsWinUI.uiView={type:"Dialog",props:{width:960,height:800},compId:2,child:[{type:"Sprite",props:{y:210,x:193,visible:!1,var:"spr_tips"},compId:22,child:[{type:"Sprite",props:{y:33,x:11,texture:"view1.0/img_bg.png"},compId:17},{type:"Button",props:{y:268,x:213,var:"bu_sure",stateNum:2,skin:"view1.0/bu_click.png",labelSize:20,labelColors:"#ffffff,#ffffff",label:"OK"},compId:18},{type:"Sprite",props:{y:52,x:509,var:"bu_close",texture:"view1.0/bu_close1.png",scaleY:1,scaleX:1},compId:20},{type:"Label",props:{y:84,x:23,wordWrap:!0,width:499,var:"la_desc",valign:"middle",text:"测试事实上似乎四海事实上",height:179,fontSize:30,color:"#ffffff",align:"center"},compId:21}]},{type:"Sprite",props:{y:5,x:-89,visible:!1,var:"spr_video"},compId:30,child:[{type:"Image",props:{skin:"view1.0/img_bg.png"},compId:23},{type:"Button",props:{y:733,x:518,var:"bu_1",stateNum:2,skin:"view1.0/bu_put.png",selected:!0,labelSize:20,labelColors:"#ffffff,#ffffff",label:"1"},compId:25},{type:"Button",props:{y:734,x:656,var:"bu_2",stateNum:2,skin:"view1.0/bu_put.png",labelSize:20,labelColors:"#ffffff,#ffffff",label:"2"},compId:26},{type:"Button",props:{y:734,x:793,var:"bu_3",stateNum:2,skin:"view1.0/bu_put.png",labelSize:20,labelColors:"#ffffff,#ffffff",label:"3"},compId:27},{type:"Button",props:{y:733,x:931,var:"bu_change",stateNum:2,skin:"view1.0/bu_put.png",labelSize:20,labelColors:"#ffffff,#ffffff",label:"切换"},compId:28},{type:"Sprite",props:{y:65,x:61,width:1016,var:"bg",height:660},compId:29}]}],loadList:["view1.0/img_bg.png","view1.0/bu_click.png","view1.0/bu_close1.png","view1.0/bu_put.png"],loadList3D:[]},tipsWinUI}(Laya.Dialog);win.tipsWinUI=tipsWinUI,REG("ui.win.tipsWinUI",tipsWinUI);var warningWinUI=function(_super){function warningWinUI(){return _super.call(this)||this}return __extends(warningWinUI,_super),warningWinUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(warningWinUI.uiView)},warningWinUI.uiView={type:"Dialog",props:{width:960,height:540},compId:2,child:[{type:"Sprite",props:{y:120,x:215,texture:"view1.0/img_warningBg.png"},compId:10},{type:"Label",props:{y:178,x:250,wordWrap:!0,width:459,var:"la_desc",valign:"middle",text:"厂房粉料异常",height:176,fontSize:24,color:"#ffffff",align:"center"},compId:8},{type:"Button",props:{y:365,x:421,var:"bu_click",stateNum:2,skin:"view1.0/bu_sure.png",labelSize:20,labelColors:"#ffffff,#ffffff",label:"OK"},compId:12},{type:"Sprite",props:{y:134,x:709,texture:"view1.0/bu_close1.png"},compId:13}],loadList:["view1.0/img_warningBg.png","view1.0/bu_sure.png","view1.0/bu_close1.png"],loadList3D:[]},warningWinUI}(Laya.Dialog);win.warningWinUI=warningWinUI,REG("ui.win.warningWinUI",warningWinUI)}(ui.win||(ui.win={}))}(exports.ui||(exports.ui={})),function(ui){!function(win){!function(item){var controlRoomItemUI=function(_super){function controlRoomItemUI(){return _super.call(this)||this}return __extends(controlRoomItemUI,_super),controlRoomItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(controlRoomItemUI.uiView)},controlRoomItemUI.uiView={type:"Scene",props:{width:400,height:400},compId:2,child:[{type:"Sprite",props:{var:"settingBox"},compId:40,child:[{type:"Sprite",props:{y:9,x:0,var:"tab0"},compId:48,child:[{type:"Label",props:{width:100,text:"料仓剩余：",height:22,fontSize:20,color:"#ffffff"},compId:49},{type:"Label",props:{y:148,width:100,text:"材料名称：",height:22,fontSize:20,color:"#ffffff"},compId:50},{type:"Label",props:{y:188,width:100,text:"材料方量：",height:22,fontSize:20,color:"#ffffff"},compId:51},{type:"Label",props:{y:227,width:100,text:"核定容量：",height:22,fontSize:20,color:"#ffffff"},compId:52},{type:"Label",props:{y:268,width:100,text:"材料规格：",height:22,fontSize:20,color:"#ffffff"},compId:53},{type:"Label",props:{y:148,x:100,width:100,var:"la_desc0",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:54},{type:"Label",props:{y:188,x:100,width:100,var:"la_desc1",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:55},{type:"Label",props:{y:227,x:100,width:100,var:"la_desc2",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:56},{type:"Label",props:{y:268,x:100,width:100,var:"la_metrialType",text:"水泥",height:22,fontSize:20,color:"#ffffff",align:"left"},compId:57},{type:"Label",props:{y:46,x:1,width:367,var:"la_carNum",valign:"middle",text:"50%",height:40,fontSize:50,font:"Microsoft YaHei",color:"#ff760b",bold:!0,align:"left"},compId:58}]},{type:"Sprite",props:{y:0,x:0,width:465,var:"tab1",height:391},compId:41,child:[{type:"List",props:{x:37,width:345,var:"list",top:12,spaceY:15,bottom:0},compId:46,child:[{type:"Label",props:{y:9,x:22,width:311,text:"站点名称：百子湾搅拌站",renderType:"render",height:20,fontSize:18,font:"Microsoft YaHei",color:"#00ffff"},compId:47}]},{type:"HTMLDivElement",props:{y:51,x:39,width:228,height:18,runtime:"laya.html.dom.HTMLDivElement"},compId:60}]}]}],loadList:[],loadList3D:[]},controlRoomItemUI}(Laya.Scene);item.controlRoomItemUI=controlRoomItemUI,REG("ui.win.item.controlRoomItemUI",controlRoomItemUI)}(win.item||(win.item={}))}(ui.win||(ui.win={}))}(exports.ui||(exports.ui={}))},{}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Eventer=function(){function Eventer(){this._event=new Laya.EventDispatcher}return Eventer.getInstance=function(){return this._instance||(this._instance=new Eventer),this._instance},Eventer.prototype.updateModel=function(type,data){void 0===data&&(data=null),Eventer.getInstance()._event.event(type,data)},Eventer.prototype.on=function(type,caller,fun){Eventer.getInstance()._event.on(type,caller,fun)},Eventer.prototype.off=function(type,caller,fun){Eventer.getInstance()._event.off(type,caller,fun)},Eventer.GOING_TO_POINT="GOING_TO_POINT",Eventer.TO_POINT_OVER="TO_POINT_OVER",Eventer.CAR_ALREADY_AIM="CAR_ALREADY_AIM",Eventer.FUNC_CAR_UPDATA="FUNC_CAR_UPDATA",Eventer.SELECT_ITME_UPDATA="SELECT_ITME_UPDATA",Eventer.OPEN_INSIDE="OPEN_INSIDE",Eventer.CLOSE_INSIDE="CLOSE_INSIDE",Eventer.CLOSE_TIPS="CLOSE_TIPS",Eventer.XIEHUO_START="XIEHUO_START",Eventer.XIEHUO_END="XIEHUO_END",Eventer}();exports.default=Eventer},{}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var timeFormat,timeUtil=function(){function timeUtil(){}return timeUtil.getTimeByMs=function(ms,format){var days=Math.floor(ms/864e5),hours=Math.floor(ms%864e5/36e5),minutes=Math.floor(ms%36e5/6e4),seconds=Math.floor(ms%6e4/1e3);switch(days<10&&(days="0"+days),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),format){case timeFormat.hhmm:return hours+":"+minutes;case timeFormat.hhmmss:return hours+":"+minutes+":"+seconds;case timeFormat.mmss:return minutes+":"+seconds;case timeFormat.ddhhmmss:return days+":"+hours+":"+minutes+":"+seconds}},timeUtil}();exports.default=timeUtil,function(timeFormat){timeFormat[timeFormat.ddhhmmss=0]="ddhhmmss",timeFormat[timeFormat.hhmmss=1]="hhmmss",timeFormat[timeFormat.hhmm=2]="hhmm",timeFormat[timeFormat.mmss=3]="mmss"}(timeFormat=exports.timeFormat||(exports.timeFormat={}))},{}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gameMgr_1=require("../mgr/gameMgr"),carMgr_1=require("../script/car/carMgr"),webSocket=function(){function webSocket(){}return webSocket.getInstance=function(){return this._instance||(this._instance=new webSocket,this._instance.init()),this._instance},webSocket.prototype.init=function(){this._socket||(this._socket=new Laya.Socket,this._byte=new Laya.Byte,this._wrByte=new Laya.Byte,this._socket.endian=Laya.Byte.LITTLE_ENDIAN,this._byte.endian=Laya.Byte.LITTLE_ENDIAN,this._wrByte.endian=Laya.Byte.LITTLE_ENDIAN,this._socket.connectByUrl("ws://36.112.135.128:30000"),this._socket.on(Laya.Event.OPEN,this,this.openHandler),this._socket.on(Laya.Event.MESSAGE,this,this.receiveHandler),this._socket.on(Laya.Event.CLOSE,this,this.closeHandler),this._socket.on(Laya.Event.ERROR,this,this.errorHandler))},webSocket.prototype.openHandler=function(event){void 0===event&&(event=null),console.log("链接通过websocket"),this.sendMsgHandler("tttt")},webSocket.prototype.closeHandler=function(e){void 0===e&&(e=null)},webSocket.prototype.errorHandler=function(e){void 0===e&&(e=null)},webSocket.prototype.sendMsgHandler=function(msg,isByte){void 0===isByte&&(isByte=!1),isByte?(this._wrByte.writeUTFString(msg),this._byte.writeArrayBuffer(this._wrByte.buffer),this._socket.send(this._byte.buffer)):this._socket.send(msg)},webSocket.prototype.receiveHandler=function(msg){void 0===msg&&(msg=null);var data=JSON.parse(msg);switch(data.PUSHName){case webSocket.PushLedInfo:var ledInfo=JSON.parse(data.Table1);gameMgr_1.default.getInstance().buildingSc.powerFactorySc.display1.changeStr(ledInfo),carMgr_1.default.getInstance().rankCarPorking(ledInfo);break;case webSocket.PushInsertData:case webSocket.PushAllData:carMgr_1.default.getInstance().pareserCarData(data.Table1);break;case webSocket.p_DB_PushYieldTransitData:gameMgr_1.default.getInstance().buildingSc.controlRoomSc.pushTransportOrder(data.Table1);break;case webSocket.PushChangeCarState:carMgr_1.default.getInstance().changeCarState(data.Table1);break;default:console.log(msg)}},webSocket.PushLedInfo="PushLedInfo",webSocket.PushAllData="PushAllData",webSocket.p_DB_PushYieldTransitData="p_DB_PushYieldTransitData",webSocket.PushChangeCarState="PushChangeCarState",webSocket.PushInsertData="PushInsertData",webSocket}();exports.default=webSocket},{"../mgr/gameMgr":5,"../script/car/carMgr":38}]},{},[2]);